!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define("underscore",e):(t="undefined"!=typeof globalThis?globalThis:t||self,function(){var i=t._,n=t._=e();n.noConflict=function(){return t._=i,n}}())}(this,(function(){var t="1.13.4",e="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||Function("return this")()||{},i=Array.prototype,n=Object.prototype,r="undefined"!=typeof Symbol?Symbol.prototype:null,s=i.push,o=i.slice,a=n.toString,l=n.hasOwnProperty,c="undefined"!=typeof ArrayBuffer,h="undefined"!=typeof DataView,u=Array.isArray,d=Object.keys,f=Object.create,p=c&&ArrayBuffer.isView,m=isNaN,g=isFinite,v=!{toString:null}.propertyIsEnumerable("toString"),y=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],b=Math.pow(2,53)-1;function w(t,e){return e=null==e?t.length-1:+e,function(){for(var i=Math.max(arguments.length-e,0),n=Array(i),r=0;r<i;r++)n[r]=arguments[r+e];switch(e){case 0:return t.call(this,n);case 1:return t.call(this,arguments[0],n);case 2:return t.call(this,arguments[0],arguments[1],n)}var s=Array(e+1);for(r=0;r<e;r++)s[r]=arguments[r];return s[e]=n,t.apply(this,s)}}function x(t){var e=typeof t;return"function"===e||"object"===e&&!!t}function C(t){return void 0===t}function _(t){return!0===t||!1===t||"[object Boolean]"===a.call(t)}function k(t){var e="[object "+t+"]";return function(t){return a.call(t)===e}}var $=k("String"),P=k("Number"),E=k("Date"),T=k("RegExp"),S=k("Error"),R=k("Symbol"),M=k("ArrayBuffer"),I=k("Function"),N=e.document&&e.document.childNodes;"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof N&&(I=function(t){return"function"==typeof t||!1});var A=I,j=k("Object"),B=h&&j(new DataView(new ArrayBuffer(8))),U="undefined"!=typeof Map&&j(new Map),D=k("DataView");var O=B?function(t){return null!=t&&A(t.getInt8)&&M(t.buffer)}:D,F=u||k("Array");function z(t,e){return null!=t&&l.call(t,e)}var H=k("Arguments");!function(){H(arguments)||(H=function(t){return z(t,"callee")})}();var q=H;function V(t){return P(t)&&m(t)}function W(t){return function(){return t}}function L(t){return function(e){var i=t(e);return"number"==typeof i&&i>=0&&i<=b}}function G(t){return function(e){return null==e?void 0:e[t]}}var K=G("byteLength"),Q=L(K),J=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;var Y=c?function(t){return p?p(t)&&!O(t):Q(t)&&J.test(a.call(t))}:W(!1),Z=G("length");function X(t,e){e=function(t){for(var e={},i=t.length,n=0;n<i;++n)e[t[n]]=!0;return{contains:function(t){return!0===e[t]},push:function(i){return e[i]=!0,t.push(i)}}}(e);var i=y.length,r=t.constructor,s=A(r)&&r.prototype||n,o="constructor";for(z(t,o)&&!e.contains(o)&&e.push(o);i--;)(o=y[i])in t&&t[o]!==s[o]&&!e.contains(o)&&e.push(o)}function tt(t){if(!x(t))return[];if(d)return d(t);var e=[];for(var i in t)z(t,i)&&e.push(i);return v&&X(t,e),e}function et(t,e){var i=tt(e),n=i.length;if(null==t)return!n;for(var r=Object(t),s=0;s<n;s++){var o=i[s];if(e[o]!==r[o]||!(o in r))return!1}return!0}function it(t){return t instanceof it?t:this instanceof it?void(this._wrapped=t):new it(t)}function nt(t){return new Uint8Array(t.buffer||t,t.byteOffset||0,K(t))}it.VERSION=t,it.prototype.value=function(){return this._wrapped},it.prototype.valueOf=it.prototype.toJSON=it.prototype.value,it.prototype.toString=function(){return String(this._wrapped)};var rt="[object DataView]";function st(t,e,i,n){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!=t)return e!=e;var r=typeof t;return("function"===r||"object"===r||"object"==typeof e)&&ot(t,e,i,n)}function ot(t,e,i,n){t instanceof it&&(t=t._wrapped),e instanceof it&&(e=e._wrapped);var s=a.call(t);if(s!==a.call(e))return!1;if(B&&"[object Object]"==s&&O(t)){if(!O(e))return!1;s=rt}switch(s){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return r.valueOf.call(t)===r.valueOf.call(e);case"[object ArrayBuffer]":case rt:return ot(nt(t),nt(e),i,n)}var o="[object Array]"===s;if(!o&&Y(t)){if(K(t)!==K(e))return!1;if(t.buffer===e.buffer&&t.byteOffset===e.byteOffset)return!0;o=!0}if(!o){if("object"!=typeof t||"object"!=typeof e)return!1;var l=t.constructor,c=e.constructor;if(l!==c&&!(A(l)&&l instanceof l&&A(c)&&c instanceof c)&&"constructor"in t&&"constructor"in e)return!1}n=n||[];for(var h=(i=i||[]).length;h--;)if(i[h]===t)return n[h]===e;if(i.push(t),n.push(e),o){if((h=t.length)!==e.length)return!1;for(;h--;)if(!st(t[h],e[h],i,n))return!1}else{var u,d=tt(t);if(h=d.length,tt(e).length!==h)return!1;for(;h--;)if(!z(e,u=d[h])||!st(t[u],e[u],i,n))return!1}return i.pop(),n.pop(),!0}function at(t){if(!x(t))return[];var e=[];for(var i in t)e.push(i);return v&&X(t,e),e}function lt(t){var e=Z(t);return function(i){if(null==i)return!1;var n=at(i);if(Z(n))return!1;for(var r=0;r<e;r++)if(!A(i[t[r]]))return!1;return t!==ft||!A(i[ct])}}var ct="forEach",ht=["clear","delete"],ut=["get","has","set"],dt=ht.concat(ct,ut),ft=ht.concat(ut),pt=["add"].concat(ht,ct,"has"),mt=U?lt(dt):k("Map"),gt=U?lt(ft):k("WeakMap"),vt=U?lt(pt):k("Set"),yt=k("WeakSet");function bt(t){for(var e=tt(t),i=e.length,n=Array(i),r=0;r<i;r++)n[r]=t[e[r]];return n}function wt(t){for(var e={},i=tt(t),n=0,r=i.length;n<r;n++)e[t[i[n]]]=i[n];return e}function xt(t){var e=[];for(var i in t)A(t[i])&&e.push(i);return e.sort()}function Ct(t,e){return function(i){var n=arguments.length;if(e&&(i=Object(i)),n<2||null==i)return i;for(var r=1;r<n;r++)for(var s=arguments[r],o=t(s),a=o.length,l=0;l<a;l++){var c=o[l];e&&void 0!==i[c]||(i[c]=s[c])}return i}}var _t=Ct(at),kt=Ct(tt),$t=Ct(at,!0);function Pt(t){if(!x(t))return{};if(f)return f(t);var e=function(){};e.prototype=t;var i=new e;return e.prototype=null,i}function Et(t){return F(t)?t:[t]}function Tt(t){return it.toPath(t)}function St(t,e){for(var i=e.length,n=0;n<i;n++){if(null==t)return;t=t[e[n]]}return i?t:void 0}function Rt(t,e,i){var n=St(t,Tt(e));return C(n)?i:n}function Mt(t){return t}function It(t){return t=kt({},t),function(e){return et(e,t)}}function Nt(t){return t=Tt(t),function(e){return St(e,t)}}function At(t,e,i){if(void 0===e)return t;switch(null==i?3:i){case 1:return function(i){return t.call(e,i)};case 3:return function(i,n,r){return t.call(e,i,n,r)};case 4:return function(i,n,r,s){return t.call(e,i,n,r,s)}}return function(){return t.apply(e,arguments)}}function jt(t,e,i){return null==t?Mt:A(t)?At(t,e,i):x(t)&&!F(t)?It(t):Nt(t)}function Bt(t,e){return jt(t,e,1/0)}function Ut(t,e,i){return it.iteratee!==Bt?it.iteratee(t,e):jt(t,e,i)}function Dt(){}function Ot(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))}it.toPath=Et,it.iteratee=Bt;var Ft=Date.now||function(){return(new Date).getTime()};function zt(t){var e=function(e){return t[e]},i="(?:"+tt(t).join("|")+")",n=RegExp(i),r=RegExp(i,"g");return function(t){return t=null==t?"":""+t,n.test(t)?t.replace(r,e):t}}var Ht={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},qt=zt(Ht),Vt=zt(wt(Ht)),Wt=it.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},Lt=/(.)^/,Gt={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Kt=/\\|'|\r|\n|\u2028|\u2029/g;function Qt(t){return"\\"+Gt[t]}var Jt=/^\s*(\w|\$)+\s*$/;var Yt=0;function Zt(t,e,i,n,r){if(!(n instanceof e))return t.apply(i,r);var s=Pt(t.prototype),o=t.apply(s,r);return x(o)?o:s}var Xt=w((function(t,e){var i=Xt.placeholder,n=function(){for(var r=0,s=e.length,o=Array(s),a=0;a<s;a++)o[a]=e[a]===i?arguments[r++]:e[a];for(;r<arguments.length;)o.push(arguments[r++]);return Zt(t,n,this,this,o)};return n}));Xt.placeholder=it;var te=w((function(t,e,i){if(!A(t))throw new TypeError("Bind must be called on a function");var n=w((function(r){return Zt(t,n,e,this,i.concat(r))}));return n})),ee=L(Z);function ie(t,e,i,n){if(n=n||[],e||0===e){if(e<=0)return n.concat(t)}else e=1/0;for(var r=n.length,s=0,o=Z(t);s<o;s++){var a=t[s];if(ee(a)&&(F(a)||q(a)))if(e>1)ie(a,e-1,i,n),r=n.length;else for(var l=0,c=a.length;l<c;)n[r++]=a[l++];else i||(n[r++]=a)}return n}var ne=w((function(t,e){var i=(e=ie(e,!1,!1)).length;if(i<1)throw new Error("bindAll must be passed function names");for(;i--;){var n=e[i];t[n]=te(t[n],t)}return t}));var re=w((function(t,e,i){return setTimeout((function(){return t.apply(null,i)}),e)})),se=Xt(re,it,1);function oe(t){return function(){return!t.apply(this,arguments)}}function ae(t,e){var i;return function(){return--t>0&&(i=e.apply(this,arguments)),t<=1&&(e=null),i}}var le=Xt(ae,2);function ce(t,e,i){e=Ut(e,i);for(var n,r=tt(t),s=0,o=r.length;s<o;s++)if(e(t[n=r[s]],n,t))return n}function he(t){return function(e,i,n){i=Ut(i,n);for(var r=Z(e),s=t>0?0:r-1;s>=0&&s<r;s+=t)if(i(e[s],s,e))return s;return-1}}var ue=he(1),de=he(-1);function fe(t,e,i,n){for(var r=(i=Ut(i,n,1))(e),s=0,o=Z(t);s<o;){var a=Math.floor((s+o)/2);i(t[a])<r?s=a+1:o=a}return s}function pe(t,e,i){return function(n,r,s){var a=0,l=Z(n);if("number"==typeof s)t>0?a=s>=0?s:Math.max(s+l,a):l=s>=0?Math.min(s+1,l):s+l+1;else if(i&&s&&l)return n[s=i(n,r)]===r?s:-1;if(r!=r)return(s=e(o.call(n,a,l),V))>=0?s+a:-1;for(s=t>0?a:l-1;s>=0&&s<l;s+=t)if(n[s]===r)return s;return-1}}var me=pe(1,ue,fe),ge=pe(-1,de);function ve(t,e,i){var n=(ee(t)?ue:ce)(t,e,i);if(void 0!==n&&-1!==n)return t[n]}function ye(t,e,i){var n,r;if(e=At(e,i),ee(t))for(n=0,r=t.length;n<r;n++)e(t[n],n,t);else{var s=tt(t);for(n=0,r=s.length;n<r;n++)e(t[s[n]],s[n],t)}return t}function be(t,e,i){e=Ut(e,i);for(var n=!ee(t)&&tt(t),r=(n||t).length,s=Array(r),o=0;o<r;o++){var a=n?n[o]:o;s[o]=e(t[a],a,t)}return s}function we(t){var e=function(e,i,n,r){var s=!ee(e)&&tt(e),o=(s||e).length,a=t>0?0:o-1;for(r||(n=e[s?s[a]:a],a+=t);a>=0&&a<o;a+=t){var l=s?s[a]:a;n=i(n,e[l],l,e)}return n};return function(t,i,n,r){var s=arguments.length>=3;return e(t,At(i,r,4),n,s)}}var xe=we(1),Ce=we(-1);function _e(t,e,i){var n=[];return e=Ut(e,i),ye(t,(function(t,i,r){e(t,i,r)&&n.push(t)})),n}function ke(t,e,i){e=Ut(e,i);for(var n=!ee(t)&&tt(t),r=(n||t).length,s=0;s<r;s++){var o=n?n[s]:s;if(!e(t[o],o,t))return!1}return!0}function $e(t,e,i){e=Ut(e,i);for(var n=!ee(t)&&tt(t),r=(n||t).length,s=0;s<r;s++){var o=n?n[s]:s;if(e(t[o],o,t))return!0}return!1}function Pe(t,e,i,n){return ee(t)||(t=bt(t)),("number"!=typeof i||n)&&(i=0),me(t,e,i)>=0}var Ee=w((function(t,e,i){var n,r;return A(e)?r=e:(e=Tt(e),n=e.slice(0,-1),e=e[e.length-1]),be(t,(function(t){var s=r;if(!s){if(n&&n.length&&(t=St(t,n)),null==t)return;s=t[e]}return null==s?s:s.apply(t,i)}))}));function Te(t,e){return be(t,Nt(e))}function Se(t,e,i){var n,r,s=-1/0,o=-1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var a=0,l=(t=ee(t)?t:bt(t)).length;a<l;a++)null!=(n=t[a])&&n>s&&(s=n);else e=Ut(e,i),ye(t,(function(t,i,n){((r=e(t,i,n))>o||r===-1/0&&s===-1/0)&&(s=t,o=r)}));return s}var Re=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function Me(t){return t?F(t)?o.call(t):$(t)?t.match(Re):ee(t)?be(t,Mt):bt(t):[]}function Ie(t,e,i){if(null==e||i)return ee(t)||(t=bt(t)),t[Ot(t.length-1)];var n=Me(t),r=Z(n);e=Math.max(Math.min(e,r),0);for(var s=r-1,o=0;o<e;o++){var a=Ot(o,s),l=n[o];n[o]=n[a],n[a]=l}return n.slice(0,e)}function Ne(t,e){return function(i,n,r){var s=e?[[],[]]:{};return n=Ut(n,r),ye(i,(function(e,r){var o=n(e,r,i);t(s,e,o)})),s}}var Ae=Ne((function(t,e,i){z(t,i)?t[i].push(e):t[i]=[e]})),je=Ne((function(t,e,i){t[i]=e})),Be=Ne((function(t,e,i){z(t,i)?t[i]++:t[i]=1})),Ue=Ne((function(t,e,i){t[i?0:1].push(e)}),!0);function De(t,e,i){return e in i}var Oe=w((function(t,e){var i={},n=e[0];if(null==t)return i;A(n)?(e.length>1&&(n=At(n,e[1])),e=at(t)):(n=De,e=ie(e,!1,!1),t=Object(t));for(var r=0,s=e.length;r<s;r++){var o=e[r],a=t[o];n(a,o,t)&&(i[o]=a)}return i})),Fe=w((function(t,e){var i,n=e[0];return A(n)?(n=oe(n),e.length>1&&(i=e[1])):(e=be(ie(e,!1,!1),String),n=function(t,i){return!Pe(e,i)}),Oe(t,n,i)}));function ze(t,e,i){return o.call(t,0,Math.max(0,t.length-(null==e||i?1:e)))}function He(t,e,i){return null==t||t.length<1?null==e||i?void 0:[]:null==e||i?t[0]:ze(t,t.length-e)}function qe(t,e,i){return o.call(t,null==e||i?1:e)}var Ve=w((function(t,e){return e=ie(e,!0,!0),_e(t,(function(t){return!Pe(e,t)}))})),We=w((function(t,e){return Ve(t,e)}));function Le(t,e,i,n){_(e)||(n=i,i=e,e=!1),null!=i&&(i=Ut(i,n));for(var r=[],s=[],o=0,a=Z(t);o<a;o++){var l=t[o],c=i?i(l,o,t):l;e&&!i?(o&&s===c||r.push(l),s=c):i?Pe(s,c)||(s.push(c),r.push(l)):Pe(r,l)||r.push(l)}return r}var Ge=w((function(t){return Le(ie(t,!0,!0))}));function Ke(t){for(var e=t&&Se(t,Z).length||0,i=Array(e),n=0;n<e;n++)i[n]=Te(t,n);return i}var Qe=w(Ke);function Je(t,e){return t._chain?it(e).chain():e}function Ye(t){return ye(xt(t),(function(e){var i=it[e]=t[e];it.prototype[e]=function(){var t=[this._wrapped];return s.apply(t,arguments),Je(this,i.apply(it,t))}})),it}ye(["pop","push","reverse","shift","sort","splice","unshift"],(function(t){var e=i[t];it.prototype[t]=function(){var i=this._wrapped;return null!=i&&(e.apply(i,arguments),"shift"!==t&&"splice"!==t||0!==i.length||delete i[0]),Je(this,i)}})),ye(["concat","join","slice"],(function(t){var e=i[t];it.prototype[t]=function(){var t=this._wrapped;return null!=t&&(t=e.apply(t,arguments)),Je(this,t)}}));var Ze={__proto__:null,VERSION:t,restArguments:w,isObject:x,isNull:function(t){return null===t},isUndefined:C,isBoolean:_,isElement:function(t){return!(!t||1!==t.nodeType)},isString:$,isNumber:P,isDate:E,isRegExp:T,isError:S,isSymbol:R,isArrayBuffer:M,isDataView:O,isArray:F,isFunction:A,isArguments:q,isFinite:function(t){return!R(t)&&g(t)&&!isNaN(parseFloat(t))},isNaN:V,isTypedArray:Y,isEmpty:function(t){if(null==t)return!0;var e=Z(t);return"number"==typeof e&&(F(t)||$(t)||q(t))?0===e:0===Z(tt(t))},isMatch:et,isEqual:function(t,e){return st(t,e)},isMap:mt,isWeakMap:gt,isSet:vt,isWeakSet:yt,keys:tt,allKeys:at,values:bt,pairs:function(t){for(var e=tt(t),i=e.length,n=Array(i),r=0;r<i;r++)n[r]=[e[r],t[e[r]]];return n},invert:wt,functions:xt,methods:xt,extend:_t,extendOwn:kt,assign:kt,defaults:$t,create:function(t,e){var i=Pt(t);return e&&kt(i,e),i},clone:function(t){return x(t)?F(t)?t.slice():_t({},t):t},tap:function(t,e){return e(t),t},get:Rt,has:function(t,e){for(var i=(e=Tt(e)).length,n=0;n<i;n++){var r=e[n];if(!z(t,r))return!1;t=t[r]}return!!i},mapObject:function(t,e,i){e=Ut(e,i);for(var n=tt(t),r=n.length,s={},o=0;o<r;o++){var a=n[o];s[a]=e(t[a],a,t)}return s},identity:Mt,constant:W,noop:Dt,toPath:Et,property:Nt,propertyOf:function(t){return null==t?Dt:function(e){return Rt(t,e)}},matcher:It,matches:It,times:function(t,e,i){var n=Array(Math.max(0,t));e=At(e,i,1);for(var r=0;r<t;r++)n[r]=e(r);return n},random:Ot,now:Ft,escape:qt,unescape:Vt,templateSettings:Wt,template:function(t,e,i){!e&&i&&(e=i),e=$t({},e,it.templateSettings);var n=RegExp([(e.escape||Lt).source,(e.interpolate||Lt).source,(e.evaluate||Lt).source].join("|")+"|$","g"),r=0,s="__p+='";t.replace(n,(function(e,i,n,o,a){return s+=t.slice(r,a).replace(Kt,Qt),r=a+e.length,i?s+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'":n?s+="'+\n((__t=("+n+"))==null?'':__t)+\n'":o&&(s+="';\n"+o+"\n__p+='"),e})),s+="';\n";var o,a=e.variable;if(a){if(!Jt.test(a))throw new Error("variable is not a bare identifier: "+a)}else s="with(obj||{}){\n"+s+"}\n",a="obj";s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{o=new Function(a,"_",s)}catch(t){throw t.source=s,t}var l=function(t){return o.call(this,t,it)};return l.source="function("+a+"){\n"+s+"}",l},result:function(t,e,i){var n=(e=Tt(e)).length;if(!n)return A(i)?i.call(t):i;for(var r=0;r<n;r++){var s=null==t?void 0:t[e[r]];void 0===s&&(s=i,r=n),t=A(s)?s.call(t):s}return t},uniqueId:function(t){var e=++Yt+"";return t?t+e:e},chain:function(t){var e=it(t);return e._chain=!0,e},iteratee:Bt,partial:Xt,bind:te,bindAll:ne,memoize:function(t,e){var i=function(n){var r=i.cache,s=""+(e?e.apply(this,arguments):n);return z(r,s)||(r[s]=t.apply(this,arguments)),r[s]};return i.cache={},i},delay:re,defer:se,throttle:function(t,e,i){var n,r,s,o,a=0;i||(i={});var l=function(){a=!1===i.leading?0:Ft(),n=null,o=t.apply(r,s),n||(r=s=null)},c=function(){var c=Ft();a||!1!==i.leading||(a=c);var h=e-(c-a);return r=this,s=arguments,h<=0||h>e?(n&&(clearTimeout(n),n=null),a=c,o=t.apply(r,s),n||(r=s=null)):n||!1===i.trailing||(n=setTimeout(l,h)),o};return c.cancel=function(){clearTimeout(n),a=0,n=r=s=null},c},debounce:function(t,e,i){var n,r,s,o,a,l=function(){var c=Ft()-r;e>c?n=setTimeout(l,e-c):(n=null,i||(o=t.apply(a,s)),n||(s=a=null))},c=w((function(c){return a=this,s=c,r=Ft(),n||(n=setTimeout(l,e),i&&(o=t.apply(a,s))),o}));return c.cancel=function(){clearTimeout(n),n=s=a=null},c},wrap:function(t,e){return Xt(e,t)},negate:oe,compose:function(){var t=arguments,e=t.length-1;return function(){for(var i=e,n=t[e].apply(this,arguments);i--;)n=t[i].call(this,n);return n}},after:function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},before:ae,once:le,findKey:ce,findIndex:ue,findLastIndex:de,sortedIndex:fe,indexOf:me,lastIndexOf:ge,find:ve,detect:ve,findWhere:function(t,e){return ve(t,It(e))},each:ye,forEach:ye,map:be,collect:be,reduce:xe,foldl:xe,inject:xe,reduceRight:Ce,foldr:Ce,filter:_e,select:_e,reject:function(t,e,i){return _e(t,oe(Ut(e)),i)},every:ke,all:ke,some:$e,any:$e,contains:Pe,includes:Pe,include:Pe,invoke:Ee,pluck:Te,where:function(t,e){return _e(t,It(e))},max:Se,min:function(t,e,i){var n,r,s=1/0,o=1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var a=0,l=(t=ee(t)?t:bt(t)).length;a<l;a++)null!=(n=t[a])&&n<s&&(s=n);else e=Ut(e,i),ye(t,(function(t,i,n){((r=e(t,i,n))<o||r===1/0&&s===1/0)&&(s=t,o=r)}));return s},shuffle:function(t){return Ie(t,1/0)},sample:Ie,sortBy:function(t,e,i){var n=0;return e=Ut(e,i),Te(be(t,(function(t,i,r){return{value:t,index:n++,criteria:e(t,i,r)}})).sort((function(t,e){var i=t.criteria,n=e.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(i<n||void 0===n)return-1}return t.index-e.index})),"value")},groupBy:Ae,indexBy:je,countBy:Be,partition:Ue,toArray:Me,size:function(t){return null==t?0:ee(t)?t.length:tt(t).length},pick:Oe,omit:Fe,first:He,head:He,take:He,initial:ze,last:function(t,e,i){return null==t||t.length<1?null==e||i?void 0:[]:null==e||i?t[t.length-1]:qe(t,Math.max(0,t.length-e))},rest:qe,tail:qe,drop:qe,compact:function(t){return _e(t,Boolean)},flatten:function(t,e){return ie(t,e,!1)},without:We,uniq:Le,unique:Le,union:Ge,intersection:function(t){for(var e=[],i=arguments.length,n=0,r=Z(t);n<r;n++){var s=t[n];if(!Pe(e,s)){var o;for(o=1;o<i&&Pe(arguments[o],s);o++);o===i&&e.push(s)}}return e},difference:Ve,unzip:Ke,transpose:Ke,zip:Qe,object:function(t,e){for(var i={},n=0,r=Z(t);n<r;n++)e?i[t[n]]=e[n]:i[t[n][0]]=t[n][1];return i},range:function(t,e,i){null==e&&(e=t||0,t=0),i||(i=e<t?-1:1);for(var n=Math.max(Math.ceil((e-t)/i),0),r=Array(n),s=0;s<n;s++,t+=i)r[s]=t;return r},chunk:function(t,e){if(null==e||e<1)return[];for(var i=[],n=0,r=t.length;n<r;)i.push(o.call(t,n,n+=e));return i},mixin:Ye,default:it},Xe=Ye(Ze);return Xe._=Xe,Xe})),function(t){var e="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global;if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],(function(i,n,r){e.Backbone=t(e,r,i,n)}));else if("undefined"!=typeof exports){var i,n=require("underscore");try{i=require("jquery")}catch(t){}t(e,exports,n,i)}else e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}((function(t,e,i,n){var r=t.Backbone,s=Array.prototype.slice;e.VERSION="1.4.1",e.$=n,e.noConflict=function(){return t.Backbone=r,this},e.emulateHTTP=!1,e.emulateJSON=!1;var o,a=e.Events={},l=/\s+/,c=function(t,e,n,r,s){var o,a=0;if(n&&"object"==typeof n){void 0!==r&&"context"in s&&void 0===s.context&&(s.context=r);for(o=i.keys(n);a<o.length;a++)e=c(t,e,o[a],n[o[a]],s)}else if(n&&l.test(n))for(o=n.split(l);a<o.length;a++)e=t(e,o[a],r,s);else e=t(e,n,r,s);return e};a.on=function(t,e,i){(this._events=c(h,this._events||{},t,e,{context:i,ctx:this,listening:o}),o)&&((this._listeners||(this._listeners={}))[o.id]=o,o.interop=!1);return this},a.listenTo=function(t,e,n){if(!t)return this;var r=t._listenId||(t._listenId=i.uniqueId("l")),s=this._listeningTo||(this._listeningTo={}),a=o=s[r];a||(this._listenId||(this._listenId=i.uniqueId("l")),a=o=s[r]=new g(this,t));var l=u(t,e,n,this);if(o=void 0,l)throw l;return a.interop&&a.on(e,n),this};var h=function(t,e,i,n){if(i){var r=t[e]||(t[e]=[]),s=n.context,o=n.ctx,a=n.listening;a&&a.count++,r.push({callback:i,context:s,ctx:s||o,listening:a})}return t},u=function(t,e,i,n){try{t.on(e,i,n)}catch(t){return t}};a.off=function(t,e,i){return this._events?(this._events=c(d,this._events,t,e,{context:i,listeners:this._listeners}),this):this},a.stopListening=function(t,e,n){var r=this._listeningTo;if(!r)return this;for(var s=t?[t._listenId]:i.keys(r),o=0;o<s.length;o++){var a=r[s[o]];if(!a)break;a.obj.off(e,n,this),a.interop&&a.off(e,n)}return i.isEmpty(r)&&(this._listeningTo=void 0),this};var d=function(t,e,n,r){if(t){var s,o=r.context,a=r.listeners,l=0;if(e||o||n){for(s=e?[e]:i.keys(t);l<s.length;l++){var c=t[e=s[l]];if(!c)break;for(var h=[],u=0;u<c.length;u++){var d=c[u];if(n&&n!==d.callback&&n!==d.callback._callback||o&&o!==d.context)h.push(d);else{var f=d.listening;f&&f.off(e,n)}}h.length?t[e]=h:delete t[e]}return t}for(s=i.keys(a);l<s.length;l++)a[s[l]].cleanup()}};a.once=function(t,e,i){var n=c(f,{},t,e,this.off.bind(this));return"string"==typeof t&&null==i&&(e=void 0),this.on(n,e,i)},a.listenToOnce=function(t,e,i){var n=c(f,{},e,i,this.stopListening.bind(this,t));return this.listenTo(t,n)};var f=function(t,e,n,r){if(n){var s=t[e]=i.once((function(){r(e,s),n.apply(this,arguments)}));s._callback=n}return t};a.trigger=function(t){if(!this._events)return this;for(var e=Math.max(0,arguments.length-1),i=Array(e),n=0;n<e;n++)i[n]=arguments[n+1];return c(p,this._events,t,void 0,i),this};var p=function(t,e,i,n){if(t){var r=t[e],s=t.all;r&&s&&(s=s.slice()),r&&m(r,n),s&&m(s,[e].concat(n))}return t},m=function(t,e){var i,n=-1,r=t.length,s=e[0],o=e[1],a=e[2];switch(e.length){case 0:for(;++n<r;)(i=t[n]).callback.call(i.ctx);return;case 1:for(;++n<r;)(i=t[n]).callback.call(i.ctx,s);return;case 2:for(;++n<r;)(i=t[n]).callback.call(i.ctx,s,o);return;case 3:for(;++n<r;)(i=t[n]).callback.call(i.ctx,s,o,a);return;default:for(;++n<r;)(i=t[n]).callback.apply(i.ctx,e);return}},g=function(t,e){this.id=t._listenId,this.listener=t,this.obj=e,this.interop=!0,this.count=0,this._events=void 0};g.prototype.on=a.on,g.prototype.off=function(t,e){var i;this.interop?(this._events=c(d,this._events,t,e,{context:void 0,listeners:void 0}),i=!this._events):(this.count--,i=0===this.count),i&&this.cleanup()},g.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},a.bind=a.on,a.unbind=a.off,i.extend(e,a);var v=e.Model=function(t,e){var n=t||{};e||(e={}),this.preinitialize.apply(this,arguments),this.cid=i.uniqueId(this.cidPrefix),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(n=this.parse(n,e)||{});var r=i.result(this,"defaults");n=i.defaults(i.extend({},r,n),r),this.set(n,e),this.changed={},this.initialize.apply(this,arguments)};i.extend(v.prototype,a,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(t){return i.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return i.escape(this.get(t))},has:function(t){return null!=this.get(t)},matches:function(t){return!!i.iteratee(t,this)(this.attributes)},set:function(t,e,n){if(null==t)return this;var r;if("object"==typeof t?(r=t,n=e):(r={})[t]=e,n||(n={}),!this._validate(r,n))return!1;var s=n.unset,o=n.silent,a=[],l=this._changing;this._changing=!0,l||(this._previousAttributes=i.clone(this.attributes),this.changed={});var c=this.attributes,h=this.changed,u=this._previousAttributes;for(var d in r)e=r[d],i.isEqual(c[d],e)||a.push(d),i.isEqual(u[d],e)?delete h[d]:h[d]=e,s?delete c[d]:c[d]=e;if(this.idAttribute in r){var f=this.id;this.id=this.get(this.idAttribute),this.trigger("changeId",this,f,n)}if(!o){a.length&&(this._pending=n);for(var p=0;p<a.length;p++)this.trigger("change:"+a[p],this,c[a[p]],n)}if(l)return this;if(!o)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,i.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var n in this.attributes)e[n]=void 0;return this.set(e,i.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!i.isEmpty(this.changed):i.has(this.changed,t)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&i.clone(this.changed);var e,n=this._changing?this._previousAttributes:this.attributes,r={};for(var s in t){var o=t[s];i.isEqual(n[s],o)||(r[s]=o,e=!0)}return!!e&&r},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(t){t=i.extend({parse:!0},t);var e=this,n=t.success;return t.success=function(i){var r=t.parse?e.parse(i,t):i;if(!e.set(r,t))return!1;n&&n.call(t.context,e,i,t),e.trigger("sync",e,i,t)},V(this,t),this.sync("read",this,t)},save:function(t,e,n){var r;null==t||"object"==typeof t?(r=t,n=e):(r={})[t]=e;var s=(n=i.extend({validate:!0,parse:!0},n)).wait;if(r&&!s){if(!this.set(r,n))return!1}else if(!this._validate(r,n))return!1;var o=this,a=n.success,l=this.attributes;n.success=function(t){o.attributes=l;var e=n.parse?o.parse(t,n):t;if(s&&(e=i.extend({},r,e)),e&&!o.set(e,n))return!1;a&&a.call(n.context,o,t,n),o.trigger("sync",o,t,n)},V(this,n),r&&s&&(this.attributes=i.extend({},l,r));var c=this.isNew()?"create":n.patch?"patch":"update";"patch"!==c||n.attrs||(n.attrs=r);var h=this.sync(c,this,n);return this.attributes=l,h},destroy:function(t){t=t?i.clone(t):{};var e=this,n=t.success,r=t.wait,s=function(){e.stopListening(),e.trigger("destroy",e,e.collection,t)};t.success=function(i){r&&s(),n&&n.call(t.context,e,i,t),e.isNew()||e.trigger("sync",e,i,t)};var o=!1;return this.isNew()?i.defer(t.success):(V(this,t),o=this.sync("delete",this,t)),r||s(),o},url:function(){var t=i.result(this,"urlRoot")||i.result(this.collection,"url")||q();if(this.isNew())return t;var e=this.get(this.idAttribute);return t.replace(/[^\/]$/,"$&/")+encodeURIComponent(e)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},i.extend({},t,{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=i.extend({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return!n||(this.trigger("invalid",this,n,i.extend(e,{validationError:n})),!1)}});var y=e.Collection=function(t,e){e||(e={}),this.preinitialize.apply(this,arguments),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,i.extend({silent:!0},e))},b={add:!0,remove:!0,merge:!0},w={add:!0,remove:!1},x=function(t,e,i){i=Math.min(Math.max(i,0),t.length);var n,r=Array(t.length-i),s=e.length;for(n=0;n<r.length;n++)r[n]=t[n+i];for(n=0;n<s;n++)t[n+i]=e[n];for(n=0;n<r.length;n++)t[n+s+i]=r[n]};i.extend(y.prototype,a,{model:v,preinitialize:function(){},initialize:function(){},toJSON:function(t){return this.map((function(e){return e.toJSON(t)}))},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,i.extend({merge:!1},e,w))},remove:function(t,e){e=i.extend({},e);var n=!i.isArray(t);t=n?[t]:t.slice();var r=this._removeModels(t,e);return!e.silent&&r.length&&(e.changes={added:[],merged:[],removed:r},this.trigger("update",this,e)),n?r[0]:r},set:function(t,e){if(null!=t){(e=i.extend({},b,e)).parse&&!this._isModel(t)&&(t=this.parse(t,e)||[]);var n=!i.isArray(t);t=n?[t]:t.slice();var r=e.at;null!=r&&(r=+r),r>this.length&&(r=this.length),r<0&&(r+=this.length+1);var s,o,a=[],l=[],c=[],h=[],u={},d=e.add,f=e.merge,p=e.remove,m=!1,g=this.comparator&&null==r&&!1!==e.sort,v=i.isString(this.comparator)?this.comparator:null;for(o=0;o<t.length;o++){s=t[o];var y=this.get(s);if(y){if(f&&s!==y){var w=this._isModel(s)?s.attributes:s;e.parse&&(w=y.parse(w,e)),y.set(w,e),c.push(y),g&&!m&&(m=y.hasChanged(v))}u[y.cid]||(u[y.cid]=!0,a.push(y)),t[o]=y}else d&&(s=t[o]=this._prepareModel(s,e))&&(l.push(s),this._addReference(s,e),u[s.cid]=!0,a.push(s))}if(p){for(o=0;o<this.length;o++)u[(s=this.models[o]).cid]||h.push(s);h.length&&this._removeModels(h,e)}var C=!1,_=!g&&d&&p;if(a.length&&_?(C=this.length!==a.length||i.some(this.models,(function(t,e){return t!==a[e]})),this.models.length=0,x(this.models,a,0),this.length=this.models.length):l.length&&(g&&(m=!0),x(this.models,l,null==r?this.length:r),this.length=this.models.length),m&&this.sort({silent:!0}),!e.silent){for(o=0;o<l.length;o++)null!=r&&(e.index=r+o),(s=l[o]).trigger("add",s,this,e);(m||C)&&this.trigger("sort",this,e),(l.length||h.length||c.length)&&(e.changes={added:l,removed:h,merged:c},this.trigger("update",this,e))}return n?t[0]:t}},reset:function(t,e){e=e?i.clone(e):{};for(var n=0;n<this.models.length;n++)this._removeReference(this.models[n],e);return e.previousModels=this.models,this._reset(),t=this.add(t,i.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,i.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t)},unshift:function(t,e){return this.add(t,i.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t)},slice:function(){return s.apply(this.models,arguments)},get:function(t){if(null!=t)return this._byId[t]||this._byId[this.modelId(this._isModel(t)?t.attributes:t,t.idAttribute)]||t.cid&&this._byId[t.cid]},has:function(t){return null!=this.get(t)},at:function(t){return t<0&&(t+=this.length),this.models[t]},where:function(t,e){return this[e?"find":"filter"](t)},findWhere:function(t){return this.where(t,!0)},sort:function(t){var e=this.comparator;if(!e)throw new Error("Cannot sort a set without a comparator");t||(t={});var n=e.length;return i.isFunction(e)&&(e=e.bind(this)),1===n||i.isString(e)?this.models=this.sortBy(e):this.models.sort(e),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return this.map(t+"")},fetch:function(t){var e=(t=i.extend({parse:!0},t)).success,n=this;return t.success=function(i){var r=t.reset?"reset":"set";n[r](i,t),e&&e.call(t.context,n,i,t),n.trigger("sync",n,i,t)},V(this,t),this.sync("read",this,t)},create:function(t,e){var n=(e=e?i.clone(e):{}).wait;if(!(t=this._prepareModel(t,e)))return!1;n||this.add(t,e);var r=this,s=e.success;return e.success=function(t,e,i){n&&r.add(t,i),s&&s.call(i.context,t,e,i)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(t,e){return t[e||this.model.prototype.idAttribute||"id"]},values:function(){return new _(this,k)},keys:function(){return new _(this,$)},entries:function(){return new _(this,P)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){return this._isModel(t)?(t.collection||(t.collection=this),t):((e=e?i.clone(e):{}).collection=this,(n=this.model.prototype?new this.model(t,e):this.model(t,e)).validationError?(this.trigger("invalid",this,n.validationError,e),!1):n);var n},_removeModels:function(t,e){for(var i=[],n=0;n<t.length;n++){var r=this.get(t[n]);if(r){var s=this.indexOf(r);this.models.splice(s,1),this.length--,delete this._byId[r.cid];var o=this.modelId(r.attributes,r.idAttribute);null!=o&&delete this._byId[o],e.silent||(e.index=s,r.trigger("remove",r,this,e)),i.push(r),this._removeReference(r,e)}}return i},_isModel:function(t){return t instanceof v},_addReference:function(t,e){this._byId[t.cid]=t;var i=this.modelId(t.attributes,t.idAttribute);null!=i&&(this._byId[i]=t),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){delete this._byId[t.cid];var i=this.modelId(t.attributes,t.idAttribute);null!=i&&delete this._byId[i],this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,n){if(e){if(("add"===t||"remove"===t)&&i!==this)return;if("destroy"===t&&this.remove(e,n),"changeId"===t){var r=this.modelId(e.previousAttributes(),e.idAttribute),s=this.modelId(e.attributes,e.idAttribute);null!=r&&delete this._byId[r],null!=s&&(this._byId[s]=e)}}this.trigger.apply(this,arguments)}});var C="function"==typeof Symbol&&Symbol.iterator;C&&(y.prototype[C]=y.prototype.values);var _=function(t,e){this._collection=t,this._kind=e,this._index=0},k=1,$=2,P=3;C&&(_.prototype[C]=function(){return this}),_.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var t,e=this._collection.at(this._index);if(this._index++,this._kind===k)t=e;else{var i=this._collection.modelId(e.attributes,e.idAttribute);t=this._kind===$?i:[i,e]}return{value:t,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};var E=e.View=function(t){this.cid=i.uniqueId("view"),this.preinitialize.apply(this,arguments),i.extend(this,i.pick(t,S)),this._ensureElement(),this.initialize.apply(this,arguments)},T=/^(\S+)\s*(.*)$/,S=["model","collection","el","id","attributes","className","tagName","events"];i.extend(E.prototype,a,{tagName:"div",$:function(t){return this.$el.find(t)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(t){return this.undelegateEvents(),this._setElement(t),this.delegateEvents(),this},_setElement:function(t){this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0]},delegateEvents:function(t){if(t||(t=i.result(this,"events")),!t)return this;for(var e in this.undelegateEvents(),t){var n=t[e];if(i.isFunction(n)||(n=this[n]),n){var r=e.match(T);this.delegate(r[1],r[2],n.bind(this))}}return this},delegate:function(t,e,i){return this.$el.on(t+".delegateEvents"+this.cid,e,i),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(t,e,i){return this.$el.off(t+".delegateEvents"+this.cid,e,i),this},_createElement:function(t){return document.createElement(t)},_ensureElement:function(){if(this.el)this.setElement(i.result(this,"el"));else{var t=i.extend({},i.result(this,"attributes"));this.id&&(t.id=i.result(this,"id")),this.className&&(t.class=i.result(this,"className")),this.setElement(this._createElement(i.result(this,"tagName"))),this._setAttributes(t)}},_setAttributes:function(t){this.$el.attr(t)}});var R=function(t,e,n,r){i.each(n,(function(i,n){e[n]&&(t.prototype[n]=function(t,e,i,n){switch(e){case 1:return function(){return t[i](this[n])};case 2:return function(e){return t[i](this[n],e)};case 3:return function(e,r){return t[i](this[n],M(e,this),r)};case 4:return function(e,r,s){return t[i](this[n],M(e,this),r,s)};default:return function(){var e=s.call(arguments);return e.unshift(this[n]),t[i].apply(t,e)}}}(e,i,n,r))}))},M=function(t,e){return i.isFunction(t)?t:i.isObject(t)&&!e._isModel(t)?I(t):i.isString(t)?function(e){return e.get(t)}:t},I=function(t){var e=i.matches(t);return function(t){return e(t.attributes)}};i.each([[y,{forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},"models"],[v,{keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1},"attributes"]],(function(t){var e=t[0],n=t[1],r=t[2];e.mixin=function(t){var n=i.reduce(i.functions(t),(function(t,e){return t[e]=0,t}),{});R(e,t,n,r)},R(e,i,n,r)})),e.sync=function(t,n,r){var s=N[t];i.defaults(r||(r={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var o={type:s,dataType:"json"};if(r.url||(o.url=i.result(n,"url")||q()),null!=r.data||!n||"create"!==t&&"update"!==t&&"patch"!==t||(o.contentType="application/json",o.data=JSON.stringify(r.attrs||n.toJSON(r))),r.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{}),r.emulateHTTP&&("PUT"===s||"DELETE"===s||"PATCH"===s)){o.type="POST",r.emulateJSON&&(o.data._method=s);var a=r.beforeSend;r.beforeSend=function(t){if(t.setRequestHeader("X-HTTP-Method-Override",s),a)return a.apply(this,arguments)}}"GET"===o.type||r.emulateJSON||(o.processData=!1);var l=r.error;r.error=function(t,e,i){r.textStatus=e,r.errorThrown=i,l&&l.call(r.context,t,e,i)};var c=r.xhr=e.ajax(i.extend(o,r));return n.trigger("request",n,c,r),c};var N={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var A=e.Router=function(t){t||(t={}),this.preinitialize.apply(this,arguments),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},j=/\((.*?)\)/g,B=/(\(\?)?:\w+/g,U=/\*\w+/g,D=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend(A.prototype,a,{preinitialize:function(){},initialize:function(){},route:function(t,n,r){i.isRegExp(t)||(t=this._routeToRegExp(t)),i.isFunction(n)&&(r=n,n=""),r||(r=this[n]);var s=this;return e.history.route(t,(function(i){var o=s._extractParameters(t,i);!1!==s.execute(r,o,n)&&(s.trigger.apply(s,["route:"+n].concat(o)),s.trigger("route",n,o),e.history.trigger("route",s,n,o))})),this},execute:function(t,e,i){t&&t.apply(this,e)},navigate:function(t,i){return e.history.navigate(t,i),this},_bindRoutes:function(){if(this.routes){this.routes=i.result(this,"routes");for(var t,e=i.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(D,"\\$&").replace(j,"(?:$1)?").replace(B,(function(t,e){return e?t:"([^/?]+)"})).replace(U,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var n=t.exec(e).slice(1);return i.map(n,(function(t,e){return e===n.length-1?t||null:t?decodeURIComponent(t):null}))}});var O=e.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},F=/^[#\/]|\s+$/g,z=/^\/+|\/+$/g,H=/#.*$/;O.started=!1,i.extend(O.prototype,a,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root&&!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+"/"===this.root},decodeFragment:function(t){return decodeURI(t.replace(/%25/g,"%2525"))},getSearch:function(){var t=this.location.href.replace(/#.*/,"").match(/\?.+/);return t?t[0]:""},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getPath:function(){var t=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===t.charAt(0)?t.slice(1):t},getFragment:function(t){return null==t&&(t=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),t.replace(F,"")},start:function(t){if(O.started)throw new Error("Backbone.history has already been started");if(O.started=!0,this.options=i.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(z,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var e=this.root.slice(0,-1)||"/";return this.location.replace(e+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var n=document.body,r=n.insertBefore(this.iframe,n.firstChild).contentWindow;r.document.open(),r.document.close(),r.location.hash="#"+this.fragment}var s=window.addEventListener||function(t,e){return attachEvent("on"+t,e)};if(this._usePushState?s("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?s("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var t=window.removeEventListener||function(t,e){return detachEvent("on"+t,e)};this._usePushState?t("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&t("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),O.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();if(e===this.fragment&&this.iframe&&(e=this.getHash(this.iframe.contentWindow)),e===this.fragment)return!1;this.iframe&&this.navigate(e),this.loadUrl()},loadUrl:function(t){return!!this.matchRoot()&&(t=this.fragment=this.getFragment(t),i.some(this.handlers,(function(e){if(e.route.test(t))return e.callback(t),!0})))},navigate:function(t,e){if(!O.started)return!1;e&&!0!==e||(e={trigger:!!e}),t=this.getFragment(t||"");var i=this.root;""!==t&&"?"!==t.charAt(0)||(i=i.slice(0,-1)||"/");var n=i+t;t=t.replace(H,"");var r=this.decodeFragment(t);if(this.fragment!==r){if(this.fragment=r,this._usePushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);if(this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getHash(this.iframe.contentWindow)){var s=this.iframe.contentWindow;e.replace||(s.document.open(),s.document.close()),this._updateHash(s.location,t,e.replace)}}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,i){if(i){var n=t.href.replace(/(javascript:|#).*$/,"");t.replace(n+"#"+e)}else t.hash="#"+e}}),e.history=new O;v.extend=y.extend=A.extend=E.extend=O.extend=function(t,e){var n,r=this;return n=t&&i.has(t,"constructor")?t.constructor:function(){return r.apply(this,arguments)},i.extend(n,r,e),n.prototype=i.create(r.prototype,t),n.prototype.constructor=n,n.__super__=r.prototype,n};var q=function(){throw new Error('A "url" property or function must be specified')},V=function(t,e){var i=e.error;e.error=function(n){i&&i.call(e.context,t,n,e),t.trigger("error",t,n,e)}};return e})),
/*
  backbone.paginator 2.0.0
  http://github.com/backbone-paginator/backbone.paginator

  Copyright (c) 2013 Jimmy Yuen Ho Wong and contributors
  Licensed under the MIT @license.
*/
function(t){if("object"==typeof exports)module.exports=t(require("underscore"),require("backbone"));else if("function"==typeof define&&define.amd)define(["underscore","backbone"],t);else if("undefined"!=typeof _&&"undefined"!=typeof Backbone){var e=Backbone.PageableCollection,i=t(_,Backbone);Backbone.PageableCollection.noConflict=function(){return Backbone.PageableCollection=e,i}}}((function(t,e){"use strict";var i=t.extend,n=t.omit,r=t.clone,s=t.each,o=t.pick,a=t.contains,l=t.isEmpty,c=t.pairs,h=t.invert,u=t.isArray,d=t.isFunction,f=t.isObject,p=t.keys,m=t.isUndefined,g=Math.ceil,v=Math.floor,y=Math.max,b=e.Collection.prototype;function w(e,i){if(!t.isNumber(e)||t.isNaN(e)||!t.isFinite(e)||~~e!==e)throw new TypeError("`"+i+"` must be a finite integer");return e}function x(t,e,i){var n=t._events[e];if(n&&n.length){var r=n[n.length-1],s=r.callback;r.callback=function(){try{s.apply(this,arguments),i()}catch(t){throw t}finally{r.callback=s}}}else i()}var C=/[\s'"]/g,_=/[<>\s'"]/g,k=e.PageableCollection=e.Collection.extend({state:{firstPage:1,lastPage:null,currentPage:null,pageSize:25,totalPages:null,totalRecords:null,sortKey:null,order:-1},mode:"server",queryParams:{currentPage:"page",pageSize:"per_page",totalPages:"total_pages",totalRecords:"total_entries",sortKey:"sort_by",order:"order",directions:{"-1":"asc",1:"desc"}},constructor:function(t,e){b.constructor.apply(this,arguments),e=e||{};var n=this.mode=e.mode||this.mode||$.mode,s=i({},$.queryParams,this.queryParams,e.queryParams||{});s.directions=i({},$.queryParams.directions,this.queryParams.directions,s.directions||{}),this.queryParams=s;var o=this.state=i({},$.state,this.state,e.state||{});o.currentPage=null==o.currentPage?o.firstPage:o.currentPage,u(t)||(t=t?[t]:[]),t=t.slice(),"server"==n||null!=o.totalRecords||l(t)||(o.totalRecords=t.length),this.switchMode(n,i({fetch:!1,resetState:!1,models:t},e));var a=e.comparator;if(o.sortKey&&!a&&this.setSorting(o.sortKey,o.order,e),"server"!=n){var c=this.fullCollection;a&&e.full&&(this.comparator=null,c.comparator=a),e.full&&c.sort(),t&&!l(t)&&(this.reset(t,i({silent:!0},e)),this.getPage(o.currentPage),t.splice.apply(t,[0,t.length].concat(this.models)))}this._initState=r(this.state)},_makeFullCollection:function(t,i){var n,r,s,o=["url","model","sync","comparator"],a=this.constructor.prototype,l={};for(n=0,r=o.length;n<r;n++)m(a[s=o[n]])||(l[s]=a[s]);var c=new(e.Collection.extend(l))(t,i);for(n=0,r=o.length;n<r;n++)this[s=o[n]]!==a[s]&&(c[s]=this[s]);return c},_makeCollectionEventHandler:function(t,e){return function(n,o,a,l){var c=t._handlers;s(p(c),(function(i){var n=c[i];t.off(i,n),e.off(i,n)}));var h=r(t.state),u=h.firstPage,d=0===u?h.currentPage:h.currentPage-1,f=h.pageSize,v=d*f,y=v+f;if("add"==n){var b,w,C;l=l||{};if(a==e)(w=e.indexOf(o))>=v&&w<y&&(C=t,b=_=w-v);else{w=v+(b=t.indexOf(o)),C=e;var _=m(l.at)?w:l.at+v}if(l.onRemove||(++h.totalRecords,delete l.onRemove),t.state=t._checkState(h),C){C.add(o,i({},l||{},{at:_}));var k=b>=f?o:!m(l.at)&&_<y&&t.length>f?t.at(f):null;k&&x(a,n,(function(){t.remove(k,{onAdd:!0})}))}}if("remove"==n)if(l.onAdd)delete l.onAdd;else{if(--h.totalRecords){var $=h.totalPages=g(h.totalRecords/f);h.lastPage=0===u?$-1:$||u,h.currentPage>$&&(h.currentPage=h.lastPage)}else h.totalRecords=null,h.totalPages=null;t.state=t._checkState(h);var P,E=l.index;a==t?((P=e.at(y))?x(t,n,(function(){t.push(P,{onRemove:!0})})):!t.length&&h.totalRecords&&t.reset(e.models.slice(v-f,y-f),i({},l,{parse:!1})),e.remove(o)):E>=v&&E<y&&((P=e.at(y-1))&&x(t,n,(function(){t.push(P,{onRemove:!0})})),t.remove(o),!t.length&&h.totalRecords&&t.reset(e.models.slice(v-f,y-f),i({},l,{parse:!1})))}if("reset"==n)if(l=a,(a=o)==t&&null==l.from&&null==l.to){var T=e.models.slice(0,v),S=e.models.slice(v+t.models.length);e.reset(T.concat(t.models).concat(S),l)}else a==e&&((h.totalRecords=e.models.length)||(h.totalRecords=null,h.totalPages=null),"client"==t.mode&&(h.lastPage=h.currentPage=h.firstPage),t.state=t._checkState(h),t.reset(e.models.slice(v,y),i({},l,{parse:!1})));"sort"==n&&(l=a,(a=o)===e&&t.reset(e.models.slice(v,y),i({},l,{parse:!1}))),s(p(c),(function(i){var n=c[i];s([t,e],(function(t){t.on(i,n);var e=t._events[i]||[];e.unshift(e.pop())}))}))}},_checkState:function(t){var e=this.mode,i=this.links,n=t.totalRecords,r=t.pageSize,s=t.currentPage,o=t.firstPage,a=t.totalPages;if(null!=n&&null!=r&&null!=s&&null!=o&&("infinite"!=e||i)){if(n=w(n,"totalRecords"),r=w(r,"pageSize"),s=w(s,"currentPage"),o=w(o,"firstPage"),r<1)throw new RangeError("`pageSize` must be >= 1");if(a=t.totalPages=g(n/r),o<0||o>1)throw new RangeError("`firstPage must be 0 or 1`");if(t.lastPage=0===o?y(0,a-1):a||o,"infinite"==e){if(!i[s+""])throw new RangeError("No link found for page "+s)}else if(s<o||a>0&&(o?s>a:s>=a))throw new RangeError("`currentPage` must be firstPage <= currentPage "+(o?">":">=")+" totalPages if "+o+"-based. Got "+s+".")}return t},setPageSize:function(t,e){t=w(t,"pageSize"),e=e||{first:!1};var r=this.state,s=g(r.totalRecords/t),o=s?y(r.firstPage,v(s*r.currentPage/r.totalPages)):r.firstPage;return r=this.state=this._checkState(i({},r,{pageSize:t,currentPage:e.first?r.firstPage:o,totalPages:s})),this.getPage(r.currentPage,n(e,["first"]))},switchMode:function(e,o){if(!a(["server","client","infinite"],e))throw new TypeError('`mode` must be one of "server", "client" or "infinite"');o=o||{fetch:!0,resetState:!0};var l=this.state=o.resetState?r(this._initState):this._checkState(i({},this.state));this.mode=e;var c,h=this,u=this.fullCollection,d=this._handlers=this._handlers||{};if("server"==e||u)"server"==e&&u&&(s(p(d),(function(t){c=d[t],h.off(t,c),u.off(t,c)})),delete this._handlers,this._fullComparator=u.comparator,delete this.fullCollection);else{(u=this._makeFullCollection(o.models||[],o)).pageableCollection=this,this.fullCollection=u;var f=this._makeCollectionEventHandler(this,u);s(["add","remove","reset","sort"],(function(e){d[e]=c=t.bind(f,{},e),h.on(e,c),u.on(e,c)})),u.comparator=this._fullComparator}if("infinite"==e)for(var m=this.links={},v=l.firstPage,b=g(l.totalRecords/l.pageSize),w=0===v?y(0,b-1):b||v,x=l.firstPage;x<=w;x++)m[x]=this.url;else this.links&&delete this.links;return o.fetch?this.fetch(n(o,"fetch","resetState")):this},hasPreviousPage:function(){var t=this.state,e=t.currentPage;return"infinite"!=this.mode?e>t.firstPage:!!this.links[e-1]},hasNextPage:function(){var t=this.state,e=this.state.currentPage;return"infinite"!=this.mode?e<t.lastPage:!!this.links[e+1]},getFirstPage:function(t){return this.getPage("first",t)},getPreviousPage:function(t){return this.getPage("prev",t)},getNextPage:function(t){return this.getPage("next",t)},getLastPage:function(t){return this.getPage("last",t)},getPage:function(t,e){var r=this.mode,s=this.fullCollection;e=e||{fetch:!1};var o=this.state,a=o.firstPage,c=o.currentPage,h=o.lastPage,u=o.pageSize,d=t;switch(t){case"first":d=a;break;case"prev":d=c-1;break;case"next":d=c+1;break;case"last":d=h;break;default:d=w(t,"index")}this.state=this._checkState(i({},o,{currentPage:d})),e.from=c,e.to=d;var f=(0===a?d:d-1)*u,p=s&&s.length?s.models.slice(f,f+u):[];return"client"!=r&&("infinite"!=r||l(p))||e.fetch?("infinite"==r&&(e.url=this.links[d]),this.fetch(n(e,"fetch"))):(this.reset(p,n(e,"fetch")),this)},getPageByOffset:function(t,e){if(t<0)throw new RangeError("`offset must be > 0`");t=w(t);var i=v(t/this.state.pageSize);return 0!==this.state.firstPage&&i++,i>this.state.lastPage&&(i=this.state.lastPage),this.getPage(i,e)},sync:function(t,n,r){var s=this;if("infinite"==s.mode){var o=r.success,a=s.state.currentPage;r.success=function(t,e,n){var l=s.links,c=s.parseLinks(t,i({xhr:n},r));c.first&&(l[s.state.firstPage]=c.first),c.prev&&(l[a-1]=c.prev),c.next&&(l[a+1]=c.next),o&&o(t,e,n)}}return(b.sync||e.sync).call(s,t,n,r)},parseLinks:function(t,e){var i={},n=e.xhr.getResponseHeader("Link");if(n){var r=["first","prev","next"];s(n.split(","),(function(t){var e=t.split(";"),n=e[0].replace(_,""),o=e.slice(1);s(o,(function(t){var e=t.split("="),s=e[0].replace(C,""),o=e[1].replace(C,"");"rel"==s&&a(r,o)&&(i[o]=n)}))}))}return i},parse:function(t,e){var n=this.parseState(t,r(this.queryParams),r(this.state),e);return n&&(this.state=this._checkState(i({},this.state,n))),this.parseRecords(t,e)},parseState:function(e,i,o,a){if(e&&2===e.length&&f(e[0])&&u(e[1])){var l=r(o),d=e[0];return s(c(n(i,"directions")),(function(e){var i=e[0],n=e[1],r=d[n];m(r)||t.isNull(r)||(l[i]=d[n])})),d.order&&(l.order=1*h(i.directions)[d.order]),l}},parseRecords:function(t,e){return t&&2===t.length&&f(t[0])&&u(t[1])?t[1]:t},fetch:function(t){t=t||{};var e=this._checkState(this.state),s=this.mode;"infinite"!=s||t.url||(t.url=this.links[e.currentPage]);var a=t.data||{},l=t.url||this.url||"";d(l)&&(l=l.call(this));var h=l.indexOf("?");-1!=h&&(i(a,function(t){for(var e,i,n,r,s={},o=decodeURIComponent,a=t.split("&"),l=0,c=a.length;l<c;l++)i=(e=a[l].split("="))[0],n=e[1]||!0,i=o(i),n=o(n),r=s[i],u(r)?r.push(n):s[i]=r?[r,n]:n;return s}(l.slice(h+1))),l=l.slice(0,h)),t.url=l,t.data=a;var f,g,v,y,w="client"==this.mode?o(this.queryParams,"sortKey","order"):n(o(this.queryParams,p($.queryParams)),"directions"),x=c(w),C=r(this);for(f=0;f<x.length;f++)v=(g=x[f])[0],y=g[1],y=d(y)?y.call(C):y,null!=e[v]&&null!=y&&(a[y]=e[v]);e.sortKey&&e.order?a[d(w.order)?w.order.call(C):w.order]=this.queryParams.directions[e.order+""]:e.sortKey||delete a[w.order];var _=c(n(this.queryParams,p($.queryParams)));for(f=0;f<_.length;f++)y=(g=_[f])[1],null!=(y=d(y)?y.call(C):y)&&(a[g[0]]=y);if("server"!=s){var k=this,P=this.fullCollection,E=t.success;return t.success=function(e,n,r){r=r||{},m(t.silent)?delete r.silent:r.silent=t.silent;var o=e.models;"client"==s?P.reset(o,r):(P.add(o,i({at:P.length},i(r,{parse:!1}))),k.trigger("reset",k,r)),E&&E(e,n,r)},b.fetch.call(this,i({},t,{silent:!0}))}return b.fetch.call(this,t)},_makeComparator:function(t,e,i){var n=this.state;if(t=t||n.sortKey,e=e||n.order,t&&e)return i||(i=function(t,e){return t.get(e)}),function(n,r){var s,o=i(n,t),a=i(r,t);return 1===e&&(s=o,o=a,a=s),o===a?0:o<a?-1:1}},setSorting:function(t,e,n){var r=this.state;r.sortKey=t,r.order=e=e||r.order;var s=this.fullCollection,o=!1,a=!1;t||(o=a=!0);var l=this.mode;n=i({side:"client"==l?l:"server",full:!0},n);var c=this._makeComparator(t,e,n.sortValue),h=n.full,u=n.side;return"client"==u?h?(s&&(s.comparator=c),o=!0):(this.comparator=c,a=!0):"server"!=u||h||(this.comparator=c),o&&(this.comparator=null),a&&s&&(s.comparator=null),this}}),$=k.prototype;return k})),function(t){"use strict";t((function(){var e;t.support.transition=(e=function(){var t,e=document.createElement("bootstrap"),i={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(t in i)if(void 0!==e.style[t])return i[t]}())&&{end:e}}))}(window.jQuery),function(t){"use strict";var e='[data-dismiss="alert"]',i=function(i){t(i).on("click",e,this.close)};i.prototype.close=function(e){var i,n=t(this),r=n.attr("data-target");function s(){i.trigger("closed").remove()}r||(r=(r=n.attr("href"))&&r.replace(/.*(?=#[^\s]*$)/,"")),i=t(r),e&&e.preventDefault(),i.length||(i=n.hasClass("alert")?n:n.parent()),i.trigger(e=t.Event("close")),e.isDefaultPrevented()||(i.removeClass("in"),t.support.transition&&i.hasClass("fade")?i.on(t.support.transition.end,s):s())};var n=t.fn.alert;t.fn.alert=function(e){return this.each((function(){var n=t(this),r=n.data("alert");r||n.data("alert",r=new i(this)),"string"==typeof e&&r[e].call(n)}))},t.fn.alert.Constructor=i,t.fn.alert.noConflict=function(){return t.fn.alert=n,this},t(document).on("click.alert.data-api",e,i.prototype.close)}(window.jQuery),function(t){"use strict";var e=function(e,i){this.$element=t(e),this.options=t.extend({},t.fn.button.defaults,i)};e.prototype.setState=function(t){var e="disabled",i=this.$element,n=i.data(),r=i.is("input")?"val":"html";t+="Text",n.resetText||i.data("resetText",i[r]()),i[r](n[t]||this.options[t]),setTimeout((function(){"loadingText"==t?i.addClass(e).attr(e,e):i.removeClass(e).removeAttr(e)}),0)},e.prototype.toggle=function(){var t=this.$element.closest('[data-toggle="buttons-radio"]');t&&t.find(".active").removeClass("active"),this.$element.toggleClass("active")};var i=t.fn.button;t.fn.button=function(i){return this.each((function(){var n=t(this),r=n.data("button"),s="object"==typeof i&&i;r||n.data("button",r=new e(this,s)),"toggle"==i?r.toggle():i&&r.setState(i)}))},t.fn.button.defaults={loadingText:"loading..."},t.fn.button.Constructor=e,t.fn.button.noConflict=function(){return t.fn.button=i,this},t(document).on("click.button.data-api","[data-toggle^=button]",(function(e){var i=t(e.target);i.hasClass("btn")||(i=i.closest(".btn")),i.button("toggle")}))}(window.jQuery),function(t){"use strict";var e=function(e,i){this.$element=t(e),this.options=i,"hover"==this.options.pause&&this.$element.on("mouseenter",t.proxy(this.pause,this)).on("mouseleave",t.proxy(this.cycle,this))};e.prototype={cycle:function(e){return e||(this.paused=!1),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},to:function(e){var i=this.$element.find(".item.active"),n=i.parent().children(),r=n.index(i),s=this;if(!(e>n.length-1||e<0))return this.sliding?this.$element.one("slid",(function(){s.to(e)})):r==e?this.pause().cycle():this.slide(e>r?"next":"prev",t(n[e]))},pause:function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition.end&&(this.$element.trigger(t.support.transition.end),this.cycle()),clearInterval(this.interval),this.interval=null,this},next:function(){if(!this.sliding)return this.slide("next")},prev:function(){if(!this.sliding)return this.slide("prev")},slide:function(e,i){var n,r=this.$element.find(".item.active"),s=i||r[e](),o=this.interval,a="next"==e?"left":"right",l="next"==e?"first":"last",c=this;if(this.sliding=!0,o&&this.pause(),s=s.length?s:this.$element.find(".item")[l](),n=t.Event("slide",{relatedTarget:s[0]}),!s.hasClass("active")){if(t.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(n),n.isDefaultPrevented())return;s.addClass(e),s[0].offsetWidth,r.addClass(a),s.addClass(a),this.$element.one(t.support.transition.end,(function(){s.removeClass([e,a].join(" ")).addClass("active"),r.removeClass(["active",a].join(" ")),c.sliding=!1,setTimeout((function(){c.$element.trigger("slid")}),0)}))}else{if(this.$element.trigger(n),n.isDefaultPrevented())return;r.removeClass("active"),s.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return o&&this.cycle(),this}}};var i=t.fn.carousel;t.fn.carousel=function(i){return this.each((function(){var n=t(this),r=n.data("carousel"),s=t.extend({},t.fn.carousel.defaults,"object"==typeof i&&i),o="string"==typeof i?i:s.slide;r||n.data("carousel",r=new e(this,s)),"number"==typeof i?r.to(i):o?r[o]():s.interval&&r.cycle()}))},t.fn.carousel.defaults={interval:5e3,pause:"hover"},t.fn.carousel.Constructor=e,t.fn.carousel.noConflict=function(){return t.fn.carousel=i,this},t(document).on("click.carousel.data-api","[data-slide]",(function(e){var i,n=t(this),r=t(n.attr("data-target")||(i=n.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"")),s=t.extend({},r.data(),n.data());r.carousel(s),e.preventDefault()}))}(window.jQuery),function(t){"use strict";var e=function(e,i){this.$element=t(e),this.options=t.extend({},t.fn.collapse.defaults,i),this.options.parent&&(this.$parent=t(this.options.parent)),this.options.toggle&&this.toggle()};e.prototype={constructor:e,dimension:function(){return this.$element.hasClass("width")?"width":"height"},show:function(){var e,i,n,r;if(!this.transitioning){if(e=this.dimension(),i=t.camelCase(["scroll",e].join("-")),(n=this.$parent&&this.$parent.find("> .accordion-group > .in"))&&n.length){if((r=n.data("collapse"))&&r.transitioning)return;n.collapse("hide"),r||n.data("collapse",null)}this.$element[e](0),this.transition("addClass",t.Event("show"),"shown"),t.support.transition&&this.$element[e](this.$element[0][i])}},hide:function(){var e;this.transitioning||(e=this.dimension(),this.reset(this.$element[e]()),this.transition("removeClass",t.Event("hide"),"hidden"),this.$element[e](0))},reset:function(t){var e=this.dimension();return this.$element.removeClass("collapse")[e](t||"auto")[0].offsetWidth,this.$element[null!==t?"addClass":"removeClass"]("collapse"),this},transition:function(e,i,n){var r=this,s=function(){"show"==i.type&&r.reset(),r.transitioning=0,r.$element.trigger(n)};this.$element.trigger(i),i.isDefaultPrevented()||(this.transitioning=1,this.$element[e]("in"),t.support.transition&&this.$element.hasClass("collapse")?this.$element.one(t.support.transition.end,s):s())},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};var i=t.fn.collapse;t.fn.collapse=function(i){return this.each((function(){var n=t(this),r=n.data("collapse"),s="object"==typeof i&&i;r||n.data("collapse",r=new e(this,s)),"string"==typeof i&&r[i]()}))},t.fn.collapse.defaults={toggle:!0},t.fn.collapse.Constructor=e,t.fn.collapse.noConflict=function(){return t.fn.collapse=i,this},t(document).on("click.collapse.data-api","[data-toggle=collapse]",(function(e){var i,n=t(this),r=n.attr("data-target")||e.preventDefault()||(i=n.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,""),s=t(r).data("collapse")?"toggle":n.data();n[t(r).hasClass("in")?"addClass":"removeClass"]("collapsed"),t(r).collapse(s)}))}(window.jQuery),function(t){"use strict";var e="[data-toggle=dropdown]",i=function(e){var i=t(e).on("click.dropdown.data-api",this.toggle);t("html").on("click.dropdown.data-api",(function(){i.parent().removeClass("open")}))};function n(){t(e).each((function(){r(t(this)).removeClass("open")}))}function r(e){var i,n=e.attr("data-target");return n||(n=(n=e.attr("href"))&&/#/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,"")),(i=t(n)).length||(i=e.parent()),i}i.prototype={constructor:i,toggle:function(e){var i,s,o=t(this);if(!o.is(".disabled, :disabled"))return s=(i=r(o)).hasClass("open"),n(),s||i.toggleClass("open"),o.focus(),!1},keydown:function(e){var i,n,s,o,a;if(/(38|40|27)/.test(e.keyCode)&&(i=t(this),e.preventDefault(),e.stopPropagation(),!i.is(".disabled, :disabled"))){if(!(o=(s=r(i)).hasClass("open"))||o&&27==e.keyCode)return i.click();(n=t("[role=menu] li:not(.divider):visible a",s)).length&&(a=n.index(n.filter(":focus")),38==e.keyCode&&a>0&&a--,40==e.keyCode&&a<n.length-1&&a++,~a||(a=0),n.eq(a).focus())}}};var s=t.fn.dropdown;t.fn.dropdown=function(e){return this.each((function(){var n=t(this),r=n.data("dropdown");r||n.data("dropdown",r=new i(this)),"string"==typeof e&&r[e].call(n)}))},t.fn.dropdown.Constructor=i,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=s,this},t(document).on("click.dropdown.data-api touchstart.dropdown.data-api",n).on("click.dropdown touchstart.dropdown.data-api",".dropdown form",(function(t){t.stopPropagation()})).on("touchstart.dropdown.data-api",".dropdown-menu",(function(t){t.stopPropagation()})).on("click.dropdown.data-api touchstart.dropdown.data-api",e,i.prototype.toggle).on("keydown.dropdown.data-api touchstart.dropdown.data-api",e+", [role=menu]",i.prototype.keydown)}(window.jQuery),function(t){"use strict";var e=function(e,i){this.options=i,this.$element=t(e).delegate('[data-dismiss="modal"]',"click.dismiss.modal",t.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};e.prototype={constructor:e,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var e=this,i=t.Event("show");this.$element.trigger(i),this.isShown||i.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.backdrop((function(){var i=t.support.transition&&e.$element.hasClass("fade");e.$element.parent().length||e.$element.appendTo(document.body),e.$element.show(),i&&e.$element[0].offsetWidth,e.$element.addClass("in").attr("aria-hidden",!1),e.enforceFocus(),i?e.$element.one(t.support.transition.end,(function(){e.$element.focus().trigger("shown")})):e.$element.focus().trigger("shown")})))},hide:function(e){e&&e.preventDefault();e=t.Event("hide"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),t(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),t.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var e=this;t(document).on("focusin.modal",(function(t){e.$element[0]===t.target||e.$element.has(t.target).length||e.$element.focus()}))},escape:function(){var t=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",(function(e){27==e.which&&t.hide()})):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var e=this,i=setTimeout((function(){e.$element.off(t.support.transition.end),e.hideModal()}),500);this.$element.one(t.support.transition.end,(function(){clearTimeout(i),e.hideModal()}))},hideModal:function(t){this.$element.hide().trigger("hidden"),this.backdrop()},removeBackdrop:function(){this.$backdrop.remove(),this.$backdrop=null},backdrop:function(e){var i=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var n=t.support.transition&&i;this.$backdrop=t('<div class="modal-backdrop '+i+'" />').appendTo(document.body),this.$backdrop.click("static"==this.options.backdrop?t.proxy(this.$element[0].focus,this.$element[0]):t.proxy(this.hide,this)),n&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),n?this.$backdrop.one(t.support.transition.end,e):e()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(t.support.transition.end,t.proxy(this.removeBackdrop,this)):this.removeBackdrop()):e&&e()}};var i=t.fn.modal;t.fn.modal=function(i){return this.each((function(){var n=t(this),r=n.data("modal"),s=t.extend({},t.fn.modal.defaults,n.data(),"object"==typeof i&&i);r||n.data("modal",r=new e(this,s)),"string"==typeof i?r[i]():s.show&&r.show()}))},t.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},t.fn.modal.Constructor=e,t.fn.modal.noConflict=function(){return t.fn.modal=i,this},t(document).on("click.modal.data-api",'[data-toggle="modal"]',(function(e){var i=t(this),n=i.attr("href"),r=t(i.attr("data-target")||n&&n.replace(/.*(?=#[^\s]+$)/,"")),s=r.data("modal")?"toggle":t.extend({remote:!/#/.test(n)&&n},r.data(),i.data());e.preventDefault(),r.modal(s).one("hide",(function(){i.focus()}))}))}(window.jQuery),function(t){"use strict";var e=function(t,e){this.init("tooltip",t,e)};e.prototype={constructor:e,init:function(e,i,n){var r,s;this.type=e,this.$element=t(i),this.options=this.getOptions(n),this.enabled=!0,"click"==this.options.trigger?this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this)):"manual"!=this.options.trigger&&(r="hover"==this.options.trigger?"mouseenter":"focus",s="hover"==this.options.trigger?"mouseleave":"blur",this.$element.on(r+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(s+"."+this.type,this.options.selector,t.proxy(this.leave,this))),this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(e){return(e=t.extend({},t.fn[this.type].defaults,e,this.$element.data())).delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},enter:function(e){var i=t(e.currentTarget)[this.type](this._options).data(this.type);if(!i.options.delay||!i.options.delay.show)return i.show();clearTimeout(this.timeout),i.hoverState="in",this.timeout=setTimeout((function(){"in"==i.hoverState&&i.show()}),i.options.delay.show)},leave:function(e){var i=t(e.currentTarget)[this.type](this._options).data(this.type);if(this.timeout&&clearTimeout(this.timeout),!i.options.delay||!i.options.delay.hide)return i.hide();i.hoverState="out",this.timeout=setTimeout((function(){"out"==i.hoverState&&i.hide()}),i.options.delay.hide)},show:function(){var t,e,i,n,r,s,o;if(this.hasContent()&&this.enabled){switch(t=this.tip(),this.setContent(),this.options.animation&&t.addClass("fade"),s="function"==typeof this.options.placement?this.options.placement.call(this,t[0],this.$element[0]):this.options.placement,e=/in/.test(s),t.detach().css({top:0,left:0,display:"block"}).insertAfter(this.$element),i=this.getPosition(e),n=t[0].offsetWidth,r=t[0].offsetHeight,e?s.split(" ")[1]:s){case"bottom":o={top:i.top+i.height,left:i.left+i.width/2-n/2};break;case"top":o={top:i.top-r,left:i.left+i.width/2-n/2};break;case"left":o={top:i.top+i.height/2-r/2,left:i.left-n};break;case"right":o={top:i.top+i.height/2-r/2,left:i.left+i.width}}t.offset(o).addClass(s).addClass("in")}},setContent:function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},hide:function(){var e,i=this.tip();return i.removeClass("in"),t.support.transition&&this.$tip.hasClass("fade")?(e=setTimeout((function(){i.off(t.support.transition.end).detach()}),500),i.one(t.support.transition.end,(function(){clearTimeout(e),i.detach()}))):i.detach(),this},fixTitle:function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").removeAttr("title")},hasContent:function(){return this.getTitle()},getPosition:function(e){return t.extend({},e?{top:0,left:0}:this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTitle:function(){var t=this.$element,e=this.options;return t.attr("data-original-title")||("function"==typeof e.title?e.title.call(t[0]):e.title)},tip:function(){return this.$tip=this.$tip||t(this.options.template)},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(e){var i=t(e.currentTarget)[this.type](this._options).data(this.type);i[i.tip().hasClass("in")?"hide":"show"]()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var i=t.fn.tooltip;t.fn.tooltip=function(i){return this.each((function(){var n=t(this),r=n.data("tooltip"),s="object"==typeof i&&i;r||n.data("tooltip",r=new e(this,s)),"string"==typeof i&&r[i]()}))},t.fn.tooltip.Constructor=e,t.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover",title:"",delay:0,html:!1},t.fn.tooltip.noConflict=function(){return t.fn.tooltip=i,this}}(window.jQuery),function(t){"use strict";var e=function(t,e){this.init("popover",t,e)};e.prototype=t.extend({},t.fn.tooltip.Constructor.prototype,{constructor:e,setContent:function(){var t=this.tip(),e=this.getTitle(),i=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content")[this.options.html?"html":"text"](i),t.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},tip:function(){return this.$tip||(this.$tip=t(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});var i=t.fn.popover;t.fn.popover=function(i){return this.each((function(){var n=t(this),r=n.data("popover"),s="object"==typeof i&&i;r||n.data("popover",r=new e(this,s)),"string"==typeof i&&r[i]()}))},t.fn.popover.Constructor=e,t.fn.popover.defaults=t.extend({},t.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"></div></div></div>'}),t.fn.popover.noConflict=function(){return t.fn.popover=i,this}}(window.jQuery),function(t){"use strict";function e(e,i){var n,r=t.proxy(this.process,this),s=t(e).is("body")?t(window):t(e);this.options=t.extend({},t.fn.scrollspy.defaults,i),this.$scrollElement=s.on("scroll.scroll-spy.data-api",r),this.selector=(this.options.target||(n=t(e).attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=t("body"),this.refresh(),this.process()}e.prototype={constructor:e,refresh:function(){var e=this;this.offsets=t([]),this.targets=t([]),this.$body.find(this.selector).map((function(){var i=t(this),n=i.data("target")||i.attr("href"),r=/^#\w/.test(n)&&t(n);return r&&r.length&&[[r.position().top+e.$scrollElement.scrollTop(),n]]||null})).sort((function(t,e){return t[0]-e[0]})).each((function(){e.offsets.push(this[0]),e.targets.push(this[1])}))},process:function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,i=(this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight)-this.$scrollElement.height(),n=this.offsets,r=this.targets,s=this.activeTarget;if(e>=i)return s!=(t=r.last()[0])&&this.activate(t);for(t=n.length;t--;)s!=r[t]&&e>=n[t]&&(!n[t+1]||e<=n[t+1])&&this.activate(r[t])},activate:function(e){var i,n;this.activeTarget=e,t(this.selector).parent(".active").removeClass("active"),n=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',(i=t(n).parent("li").addClass("active")).parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active")),i.trigger("activate")}};var i=t.fn.scrollspy;t.fn.scrollspy=function(i){return this.each((function(){var n=t(this),r=n.data("scrollspy"),s="object"==typeof i&&i;r||n.data("scrollspy",r=new e(this,s)),"string"==typeof i&&r[i]()}))},t.fn.scrollspy.Constructor=e,t.fn.scrollspy.defaults={offset:10},t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=i,this},t(window).on("load",(function(){t('[data-spy="scroll"]').each((function(){var e=t(this);e.scrollspy(e.data())}))}))}(window.jQuery),function(t){"use strict";var e=function(e){this.element=t(e)};e.prototype={constructor:e,show:function(){var e,i,n,r=this.element,s=r.closest("ul:not(.dropdown-menu)"),o=r.attr("data-target");o||(o=(o=r.attr("href"))&&o.replace(/.*(?=#[^\s]*$)/,"")),r.parent("li").hasClass("active")||(e=s.find(".active:last a")[0],n=t.Event("show",{relatedTarget:e}),r.trigger(n),n.isDefaultPrevented()||(i=t(o),this.activate(r.parent("li"),s),this.activate(i,i.parent(),(function(){r.trigger({type:"shown",relatedTarget:e})}))))},activate:function(e,i,n){var r=i.find("> .active"),s=n&&t.support.transition&&r.hasClass("fade");function o(){r.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),e.addClass("active"),s?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu")&&e.closest("li.dropdown").addClass("active"),n&&n()}s?r.one(t.support.transition.end,o):o(),r.removeClass("in")}};var i=t.fn.tab;t.fn.tab=function(i){return this.each((function(){var n=t(this),r=n.data("tab");r||n.data("tab",r=new e(this)),"string"==typeof i&&r[i]()}))},t.fn.tab.Constructor=e,t.fn.tab.noConflict=function(){return t.fn.tab=i,this},t(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',(function(e){e.preventDefault(),t(this).tab("show")}))}(window.jQuery),function(t){"use strict";var e=function(e,i){this.$element=t(e),this.options=t.extend({},t.fn.typeahead.defaults,i),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.$menu=t(this.options.menu),this.shown=!1,this.listen()};e.prototype={constructor:e,select:function(){var t=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(t)).change(),this.hide()},updater:function(t){return t},show:function(){var e=t.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:e.top+e.height,left:e.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(e){var i;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(i=t.isFunction(this.source)?this.source(this.query,t.proxy(this.process,this)):this.source)?this.process(i):this},process:function(e){var i=this;return e=t.grep(e,(function(t){return i.matcher(t)})),(e=this.sorter(e)).length?this.render(e.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(t){return~t.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(t){for(var e,i=[],n=[],r=[];e=t.shift();)e.toLowerCase().indexOf(this.query.toLowerCase())?~e.indexOf(this.query)?n.push(e):r.push(e):i.push(e);return i.concat(n,r)},highlighter:function(t){var e=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return t.replace(new RegExp("("+e+")","ig"),(function(t,e){return"<strong>"+e+"</strong>"}))},render:function(e){var i=this;return(e=t(e).map((function(e,n){return(e=t(i.options.item).attr("data-value",n)).find("a").html(i.highlighter(n)),e[0]}))).first().addClass("active"),this.$menu.html(e),this},next:function(e){var i=this.$menu.find(".active").removeClass("active").next();i.length||(i=t(this.$menu.find("li")[0])),i.addClass("active")},prev:function(t){var e=this.$menu.find(".active").removeClass("active").prev();e.length||(e=this.$menu.find("li").last()),e.addClass("active")},listen:function(){this.$element.on("blur",t.proxy(this.blur,this)).on("keypress",t.proxy(this.keypress,this)).on("keyup",t.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",t.proxy(this.keydown,this)),this.$menu.on("click",t.proxy(this.click,this)).on("mouseenter","li",t.proxy(this.mouseenter,this))},eventSupported:function(t){var e=t in this.$element;return e||(this.$element.setAttribute(t,"return;"),e="function"==typeof this.$element[t]),e},move:function(t){if(this.shown){switch(t.keyCode){case 9:case 13:case 27:t.preventDefault();break;case 38:t.preventDefault(),this.prev();break;case 40:t.preventDefault(),this.next()}t.stopPropagation()}},keydown:function(e){this.suppressKeyPressRepeat=~t.inArray(e.keyCode,[40,38,9,13,27]),this.move(e)},keypress:function(t){this.suppressKeyPressRepeat||this.move(t)},keyup:function(t){switch(t.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}t.stopPropagation(),t.preventDefault()},blur:function(t){var e=this;setTimeout((function(){e.hide()}),150)},click:function(t){t.stopPropagation(),t.preventDefault(),this.select()},mouseenter:function(e){this.$menu.find(".active").removeClass("active"),t(e.currentTarget).addClass("active")}};var i=t.fn.typeahead;t.fn.typeahead=function(i){return this.each((function(){var n=t(this),r=n.data("typeahead"),s="object"==typeof i&&i;r||n.data("typeahead",r=new e(this,s)),"string"==typeof i&&r[i]()}))},t.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},t.fn.typeahead.Constructor=e,t.fn.typeahead.noConflict=function(){return t.fn.typeahead=i,this},t(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',(function(e){var i=t(this);i.data("typeahead")||(e.preventDefault(),i.typeahead(i.data()))}))}(window.jQuery),function(t){"use strict";var e=function(e,i){this.options=t.extend({},t.fn.affix.defaults,i),this.$window=t(window).on("scroll.affix.data-api",t.proxy(this.checkPosition,this)).on("click.affix.data-api",t.proxy((function(){setTimeout(t.proxy(this.checkPosition,this),1)}),this)),this.$element=t(e),this.checkPosition()};e.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e,i=t(document).height(),n=this.$window.scrollTop(),r=this.$element.offset(),s=this.options.offset,o=s.bottom,a=s.top;"object"!=typeof s&&(o=a=s),"function"==typeof a&&(a=s.top()),"function"==typeof o&&(o=s.bottom()),e=!(null!=this.unpin&&n+this.unpin<=r.top)&&(null!=o&&r.top+this.$element.height()>=i-o?"bottom":null!=a&&n<=a&&"top"),this.affixed!==e&&(this.affixed=e,this.unpin="bottom"==e?r.top-n:null,this.$element.removeClass("affix affix-top affix-bottom").addClass("affix"+(e?"-"+e:"")))}};var i=t.fn.affix;t.fn.affix=function(i){return this.each((function(){var n=t(this),r=n.data("affix"),s="object"==typeof i&&i;r||n.data("affix",r=new e(this,s)),"string"==typeof i&&r[i]()}))},t.fn.affix.Constructor=e,t.fn.affix.defaults={offset:0},t.fn.affix.noConflict=function(){return t.fn.affix=i,this},t(window).on("load",(function(){t('[data-spy="affix"]').each((function(){var e=t(this),i=e.data();i.offset=i.offset||{},i.offsetBottom&&(i.offset.bottom=i.offsetBottom),i.offsetTop&&(i.offset.top=i.offsetTop),e.affix(i)}))}))}(window.jQuery),
/*!
  backgrid
  http://github.com/wyuenho/backgrid

  Copyright (c) 2014 Jimmy Yuen Ho Wong and contributors <wyuenho@gmail.com>
  Licensed under the MIT license.
*/
function(t){"object"==typeof exports?module.exports=t(module.exports,require("underscore"),require("backbone")):t(this,this._,this.Backbone)}((function(t,e,i){"use strict";var n="\t\n\v\f\r \u2028\u2029\ufeff";if(!String.prototype.trim||n.trim()){n="["+n+"]";var r=new RegExp("^"+n+n+"*"),s=new RegExp(n+n+"*$");String.prototype.trim=function(){if(null==this)throw new TypeError("can't convert "+this+" to object");return String(this).replace(r,"").replace(s,"")}}function o(t,e,i){var n=e-(t+"").length;n=n<0?0:n;for(var r="",s=0;s<n;s++)r+=i;return r+t}var a=i.$,l=t.Backgrid={Extension:{},resolveNameToClass:function(t,i){if(e.isString(t)){var n=e.map(t.split("-"),(function(t){return t.slice(0,1).toUpperCase()+t.slice(1)})).join("")+i,r=l[n]||l.Extension[n];if(e.isUndefined(r))throw new ReferenceError("Class '"+n+"' not found");return r}return t},callByNeed:function(){var t=arguments[0];if(!e.isFunction(t))return t;var i=arguments[1],n=[].slice.call(arguments,2);return t.apply(i,n+""?n:[])}};e.extend(l,i.Events);var c=l.Command=function(t){e.extend(this,{altKey:!!t.altKey,char:t.char,charCode:t.charCode,ctrlKey:!!t.ctrlKey,key:t.key,keyCode:t.keyCode,locale:t.locale,location:t.location,metaKey:!!t.metaKey,repeat:!!t.repeat,shiftKey:!!t.shiftKey,which:t.which})};e.extend(c.prototype,{moveUp:function(){return 38==this.keyCode},moveDown:function(){return 40===this.keyCode},moveLeft:function(){return this.shiftKey&&9===this.keyCode},moveRight:function(){return!this.shiftKey&&9===this.keyCode},save:function(){return 13===this.keyCode},cancel:function(){return 27===this.keyCode},passThru:function(){return!(this.moveUp()||this.moveDown()||this.moveLeft()||this.moveRight()||this.save()||this.cancel())}});var h=l.CellFormatter=function(){};e.extend(h.prototype,{fromRaw:function(t,e){return t},toRaw:function(t,e){return t}});var u=l.NumberFormatter=function(t){if(e.extend(this,this.defaults,t||{}),this.decimals<0||this.decimals>20)throw new RangeError("decimals must be between 0 and 20")};u.prototype=new h,e.extend(u.prototype,{defaults:{decimals:2,decimalSeparator:".",orderSeparator:","},HUMANIZED_NUM_RE:/(\d)(?=(?:\d{3})+$)/g,fromRaw:function(t,i){if(e.isNull(t)||e.isUndefined(t))return"";var n=(t=t.toFixed(~~this.decimals)).split("."),r=n[0],s=n[1]?(this.decimalSeparator||".")+n[1]:"";return r.replace(this.HUMANIZED_NUM_RE,"$1"+this.orderSeparator)+s},toRaw:function(t,i){if(""===(t=t.trim()))return null;for(var n="",r=t.split(this.orderSeparator),s=0;s<r.length;s++)n+=r[s];var o=n.split(this.decimalSeparator);n="";for(s=0;s<o.length;s++)n=n+o[s]+".";"."===n[n.length-1]&&(n=n.slice(0,n.length-1));var a=1*(1*n).toFixed(~~this.decimals);return e.isNumber(a)&&!e.isNaN(a)?a:void 0}});var d=l.PercentFormatter=function(){l.NumberFormatter.apply(this,arguments)};d.prototype=new l.NumberFormatter,e.extend(d.prototype,{defaults:e.extend({},u.prototype.defaults,{multiplier:1,symbol:"%"}),fromRaw:function(t,e){var i=[].slice.call(arguments,1);return i.unshift(t*this.multiplier),(u.prototype.fromRaw.apply(this,i)||"0")+this.symbol},toRaw:function(t,i){var n=t.split(this.symbol);if(n&&n[0]&&""===n[1]||null==n[1]){var r=u.prototype.toRaw.call(this,n[0]);return e.isUndefined(r)?r:r/this.multiplier}}});var f=l.DatetimeFormatter=function(t){if(e.extend(this,this.defaults,t||{}),!this.includeDate&&!this.includeTime)throw new Error("Either includeDate or includeTime must be true")};f.prototype=new h,e.extend(f.prototype,{defaults:{includeDate:!0,includeTime:!0,includeMilli:!1},DATE_RE:/^([+\-]?\d{4})-(\d{2})-(\d{2})$/,TIME_RE:/^(\d{2}):(\d{2}):(\d{2})(\.(\d{3}))?$/,ISO_SPLITTER_RE:/T|Z| +/,_convert:function(t,i){if(""===(t+"").trim())return null;var n,r=null;if(e.isNumber(t)){n=o((c=new Date(t)).getUTCFullYear(),4,0)+"-"+o(c.getUTCMonth()+1,2,0)+"-"+o(c.getUTCDate(),2,0),r=o(c.getUTCHours(),2,0)+":"+o(c.getUTCMinutes(),2,0)+":"+o(c.getUTCSeconds(),2,0)}else{var s=(t=t.trim()).split(this.ISO_SPLITTER_RE)||[];r=(n=this.DATE_RE.test(s[0])?s[0]:"")&&s[1]?s[1]:this.TIME_RE.test(s[0])?s[0]:""}var a=this.DATE_RE.exec(n)||[],l=this.TIME_RE.exec(r)||[];if(i){if(this.includeDate&&e.isUndefined(a[0]))return;if(this.includeTime&&e.isUndefined(l[0]))return;if(!this.includeDate&&n)return;if(!this.includeTime&&r)return}var c=new Date(Date.UTC(1*a[1]||0,1*a[2]-1||0,1*a[3]||0,1*l[1]||null,1*l[2]||null,1*l[3]||null,1*l[5]||null)),h="";return this.includeDate&&(h=o(c.getUTCFullYear(),4,0)+"-"+o(c.getUTCMonth()+1,2,0)+"-"+o(c.getUTCDate(),2,0)),this.includeTime&&(h=h+(this.includeDate?"T":"")+o(c.getUTCHours(),2,0)+":"+o(c.getUTCMinutes(),2,0)+":"+o(c.getUTCSeconds(),2,0),this.includeMilli&&(h=h+"."+o(c.getUTCMilliseconds(),3,0))),this.includeDate&&this.includeTime&&(h+="Z"),h},fromRaw:function(t,i){return e.isNull(t)||e.isUndefined(t)?"":this._convert(t)},toRaw:function(t,e){return this._convert(t,!0)}});var p=l.StringFormatter=function(){};p.prototype=new h,e.extend(p.prototype,{fromRaw:function(t,i){return e.isUndefined(t)||e.isNull(t)?"":t+""}});var m=l.EmailFormatter=function(){};m.prototype=new h,e.extend(m.prototype,{toRaw:function(t,i){var n=t.trim().split("@");if(2===n.length&&e.all(n))return t}});var g=l.SelectFormatter=function(){};g.prototype=new h,e.extend(g.prototype,{fromRaw:function(t,i){return e.isArray(t)?t:null!=t?[t]:[]}});var v=l.CellEditor=i.View.extend({initialize:function(t){this.formatter=t.formatter,this.column=t.column,this.column instanceof T||(this.column=new T(this.column)),this.listenTo(this.model,"backgrid:editing",this.postRender)},postRender:function(t,e){return null!=e&&e.get("name")!=this.column.get("name")||this.$el.focus(),this}}),y=l.InputCellEditor=v.extend({tagName:"input",attributes:{type:"text"},events:{blur:"saveOrCancel",keydown:"saveOrCancel"},initialize:function(t){y.__super__.initialize.apply(this,arguments),t.placeholder&&this.$el.attr("placeholder",t.placeholder)},render:function(){var t=this.model;return this.$el.val(this.formatter.fromRaw(t.get(this.column.get("name")),t)),this},saveOrCancel:function(t){var i=this.formatter,n=this.model,r=this.column,s=new c(t),o="blur"===t.type;if(s.moveUp()||s.moveDown()||s.moveLeft()||s.moveRight()||s.save()||o){t.preventDefault(),t.stopPropagation();var a=this.$el.val(),l=i.toRaw(a,n);e.isUndefined(l)?n.trigger("backgrid:error",n,r,a):(n.set(r.get("name"),l),n.trigger("backgrid:edited",n,r,s))}else s.cancel()&&(t.stopPropagation(),n.trigger("backgrid:edited",n,r,s))},postRender:function(t,e){if(null==e||e.get("name")==this.column.get("name"))if("right"===this.$el.css("text-align")){var i=this.$el.val();this.$el.focus().val(null).val(i)}else this.$el.focus();return this}}),b=l.Cell=i.View.extend({tagName:"td",formatter:h,editor:y,events:{click:"enterEditMode"},initialize:function(t){this.column=t.column,this.column instanceof T||(this.column=new T(this.column));var i=this.column,n=this.model,r=this.$el,s=l.resolveNameToClass(i.get("formatter")||this.formatter,"Formatter");e.isFunction(s.fromRaw)||e.isFunction(s.toRaw)||(s=new s),this.formatter=s,this.editor=l.resolveNameToClass(this.editor,"CellEditor"),this.listenTo(n,"change:"+i.get("name"),(function(){r.hasClass("editor")||this.render()})),this.listenTo(n,"backgrid:error",this.renderError),this.listenTo(i,"change:editable change:sortable change:renderable",(function(t){var e=t.changedAttributes();for(var i in e)e.hasOwnProperty(i)&&r.toggleClass(i,e[i])})),l.callByNeed(i.editable(),i,n)&&r.addClass("editable"),l.callByNeed(i.sortable(),i,n)&&r.addClass("sortable"),l.callByNeed(i.renderable(),i,n)&&r.addClass("renderable")},render:function(){this.$el.empty();var t=this.model;return this.$el.text(this.formatter.fromRaw(t.get(this.column.get("name")),t)),this.delegateEvents(),this},enterEditMode:function(){var t=this.model,e=this.column;l.callByNeed(e.editable(),e,t)&&(this.currentEditor=new this.editor({column:this.column,model:this.model,formatter:this.formatter}),t.trigger("backgrid:edit",t,e,this,this.currentEditor),this.undelegateEvents(),this.$el.empty(),this.$el.append(this.currentEditor.$el),this.currentEditor.render(),this.$el.addClass("editor"),t.trigger("backgrid:editing",t,e,this,this.currentEditor))},renderError:function(t,e){null!=e&&e.get("name")!=this.column.get("name")||this.$el.addClass("error")},exitEditMode:function(){this.$el.removeClass("error"),this.currentEditor.remove(),this.stopListening(this.currentEditor),delete this.currentEditor,this.$el.removeClass("editor"),this.render()},remove:function(){return this.currentEditor&&(this.currentEditor.remove.apply(this.currentEditor,arguments),delete this.currentEditor),b.__super__.remove.apply(this,arguments)}}),w=l.StringCell=b.extend({className:"string-cell",formatter:p}),x=l.UriCell=b.extend({className:"uri-cell",title:null,target:"_blank",initialize:function(t){x.__super__.initialize.apply(this,arguments),this.title=t.title||this.title,this.target=t.target||this.target},render:function(){this.$el.empty();var t=this.model.get(this.column.get("name")),e=this.formatter.fromRaw(t,this.model);return this.$el.append(a("<a>",{tabIndex:-1,href:t,title:this.title||e,target:this.target}).text(e)),this.delegateEvents(),this}}),C=(l.EmailCell=w.extend({className:"email-cell",formatter:m,render:function(){this.$el.empty();var t=this.model,e=this.formatter.fromRaw(t.get(this.column.get("name")),t);return this.$el.append(a("<a>",{tabIndex:-1,href:"mailto:"+e,title:e}).text(e)),this.delegateEvents(),this}}),l.NumberCell=b.extend({className:"number-cell",decimals:u.prototype.defaults.decimals,decimalSeparator:u.prototype.defaults.decimalSeparator,orderSeparator:u.prototype.defaults.orderSeparator,formatter:u,initialize:function(t){C.__super__.initialize.apply(this,arguments);var e=this.formatter;e.decimals=this.decimals,e.decimalSeparator=this.decimalSeparator,e.orderSeparator=this.orderSeparator}})),_=(l.IntegerCell=C.extend({className:"integer-cell",decimals:0}),l.PercentCell=C.extend({className:"percent-cell",multiplier:d.prototype.defaults.multiplier,symbol:d.prototype.defaults.symbol,formatter:d,initialize:function(){_.__super__.initialize.apply(this,arguments);var t=this.formatter;t.multiplier=this.multiplier,t.symbol=this.symbol}})),k=l.DatetimeCell=b.extend({className:"datetime-cell",includeDate:f.prototype.defaults.includeDate,includeTime:f.prototype.defaults.includeTime,includeMilli:f.prototype.defaults.includeMilli,formatter:f,initialize:function(t){k.__super__.initialize.apply(this,arguments);var i=this.formatter;i.includeDate=this.includeDate,i.includeTime=this.includeTime,i.includeMilli=this.includeMilli;var n=this.includeDate?"YYYY-MM-DD":"";n+=this.includeDate&&this.includeTime?"T":"",n+=this.includeTime?"HH:mm:ss":"",n+=this.includeTime&&this.includeMilli?".SSS":"",this.editor=this.editor.extend({attributes:e.extend({},this.editor.prototype.attributes,this.editor.attributes,{placeholder:n})})}}),$=(l.DateCell=k.extend({className:"date-cell",includeTime:!1}),l.TimeCell=k.extend({className:"time-cell",includeDate:!1}),l.BooleanCellEditor=v.extend({tagName:"input",attributes:{tabIndex:-1,type:"checkbox"},events:{mousedown:function(){this.mouseDown=!0},blur:"enterOrExitEditMode",mouseup:function(){this.mouseDown=!1},change:"saveOrCancel",keydown:"saveOrCancel"},render:function(){var t=this.model,e=this.formatter.fromRaw(t.get(this.column.get("name")),t);return this.$el.prop("checked",e),this},enterOrExitEditMode:function(t){if(!this.mouseDown){var e=this.model;e.trigger("backgrid:edited",e,this.column,new c(t))}},saveOrCancel:function(t){var e=this.model,i=this.column,n=this.formatter,r=new c(t);if(r.passThru()&&"change"!=t.type)return!0;r.cancel()&&(t.stopPropagation(),e.trigger("backgrid:edited",e,i,r));var s=this.$el;if(r.save()||r.moveLeft()||r.moveRight()||r.moveUp()||r.moveDown()){t.preventDefault(),t.stopPropagation();var o=n.toRaw(s.prop("checked"),e);e.set(i.get("name"),o),e.trigger("backgrid:edited",e,i,r)}else if("change"==t.type){o=n.toRaw(s.prop("checked"),e);e.set(i.get("name"),o),s.focus()}}})),P=(l.BooleanCell=b.extend({className:"boolean-cell",editor:$,events:{click:"enterEditMode"},render:function(){this.$el.empty();var t=this.model,e=this.column,i=l.callByNeed(e.editable(),e,t);return this.$el.append(a("<input>",{tabIndex:-1,type:"checkbox",checked:this.formatter.fromRaw(t.get(e.get("name")),t),disabled:!i})),this.delegateEvents(),this}}),l.SelectCellEditor=v.extend({tagName:"select",events:{change:"save",blur:"close",keydown:"close"},template:e.template('<option value="<%- value %>" <%= selected ? \'selected="selected"\' : "" %>><%- text %></option>',null,{variable:null}),setOptionValues:function(t){this.optionValues=t,this.optionValues=e.result(this,"optionValues")},setMultiple:function(t){this.multiple=t,this.$el.prop("multiple",t)},_renderOptions:function(t,i){for(var n="",r=0;r<t.length;r++)n+=this.template({text:t[r][0],value:t[r][1],selected:e.indexOf(i,t[r][1])>-1});return n},render:function(){this.$el.empty();var t=e.result(this,"optionValues"),i=this.model,n=this.formatter.fromRaw(i.get(this.column.get("name")),i);if(!e.isArray(t))throw new TypeError("optionValues must be an array");for(var r=null,s=null,o=(r=null,null),l=null,c=0;c<t.length;c++){r=t[c];if(e.isArray(r))s=r[0],r=r[1],this.$el.append(this.template({text:s,value:r,selected:e.indexOf(n,r)>-1}));else{if(!e.isObject(r))throw new TypeError("optionValues elements must be a name-value pair or an object hash of { name: 'optgroup label', value: [option name-value pairs] }");o=r.name,(l=a("<optgroup></optgroup>",{label:o})).append(this._renderOptions.call(this,r.values,n)),this.$el.append(l)}}return this.delegateEvents(),this},save:function(t){var e=this.model,i=this.column;e.set(i.get("name"),this.formatter.toRaw(this.$el.val(),e))},close:function(t){var e=this.model,i=this.column,n=new c(t);n.cancel()?(t.stopPropagation(),e.trigger("backgrid:edited",e,i,new c(t))):(n.save()||n.moveLeft()||n.moveRight()||n.moveUp()||n.moveDown()||"blur"==t.type)&&(t.preventDefault(),t.stopPropagation(),this.save(t),e.trigger("backgrid:edited",e,i,new c(t)))}})),E=l.SelectCell=b.extend({className:"select-cell",editor:P,multiple:!1,formatter:g,optionValues:void 0,delimiter:", ",initialize:function(t){E.__super__.initialize.apply(this,arguments),this.listenTo(this.model,"backgrid:edit",(function(t,e,i,n){e.get("name")==this.column.get("name")&&(n.setOptionValues(this.optionValues),n.setMultiple(this.multiple))}))},render:function(){this.$el.empty();var t=e.result(this,"optionValues"),i=this.model,n=this.formatter.fromRaw(i.get(this.column.get("name")),i),r=[];try{if(!e.isArray(t)||e.isEmpty(t))throw new TypeError;for(var s=0;s<n.length;s++)for(var o=n[s],a=0;a<t.length;a++){var l=t[a];if(e.isArray(l)){var c=l[0];(l=l[1])==o&&r.push(c)}else{if(!e.isObject(l))throw new TypeError;for(var h=l.values,u=0;u<h.length;u++){var d=h[u];d[1]==o&&r.push(d[0])}}}this.$el.append(r.join(this.delimiter))}catch(t){if(t instanceof TypeError)throw new TypeError("'optionValues' must be of type {Array.<Array>|Array.<{name: string, values: Array.<Array>}>}");throw t}return this.delegateEvents(),this}}),T=l.Column=i.Model.extend({defaults:{name:void 0,label:void 0,sortable:!0,editable:!0,renderable:!0,formatter:void 0,sortType:"cycle",sortValue:void 0,direction:null,cell:void 0,headerCell:void 0},initialize:function(){this.has("label")||this.set({label:this.get("name")},{silent:!0});var t=l.resolveNameToClass(this.get("headerCell"),"HeaderCell"),e=l.resolveNameToClass(this.get("cell"),"Cell");this.set({cell:e,headerCell:t},{silent:!0})},sortValue:function(){var t=this.get("sortValue");return e.isString(t)?this[t]:e.isFunction(t)?t:function(t,e){return t.get(e)}}});e.each(["sortable","renderable","editable"],(function(t){T.prototype[t]=function(){var i=this.get(t);return e.isString(i)?this[i]:e.isFunction(i)?i:!!i}}));var S=l.Columns=i.Collection.extend({model:T}),R=l.Row=i.View.extend({tagName:"tr",initialize:function(t){var e=this.columns=t.columns;e instanceof i.Collection||(e=this.columns=new S(e));for(var n=this.cells=[],r=0;r<e.length;r++)n.push(this.makeCell(e.at(r),t));this.listenTo(e,"add",(function(e,i){var r=i.indexOf(e),s=this.makeCell(e,t);n.splice(r,0,s);var o=this.$el;0===r?o.prepend(s.render().$el):r===i.length-1?o.append(s.render().$el):o.children().eq(r).before(s.render().$el)})),this.listenTo(e,"remove",(function(t,e,i){n[i.index].remove(),n.splice(i.index,1)}))},makeCell:function(t){return new(t.get("cell"))({column:t,model:this.model})},render:function(){this.$el.empty();for(var t=document.createDocumentFragment(),e=0;e<this.cells.length;e++)t.appendChild(this.cells[e].render().el);return this.el.appendChild(t),this.delegateEvents(),this},remove:function(){for(var t=0;t<this.cells.length;t++){var e=this.cells[t];e.remove.apply(e,arguments)}return i.View.prototype.remove.apply(this,arguments)}}),M=l.EmptyRow=i.View.extend({tagName:"tr",emptyText:null,initialize:function(t){this.emptyText=t.emptyText,this.columns=t.columns},render:function(){this.$el.empty();var t=document.createElement("td");return t.setAttribute("colspan",this.columns.length),t.appendChild(document.createTextNode(e.result(this,"emptyText"))),this.el.className="empty",this.el.appendChild(t),this}}),I=l.HeaderCell=i.View.extend({tagName:"th",events:{"click a":"onClick"},initialize:function(t){this.column=t.column,this.column instanceof T||(this.column=new T(this.column));var e=this.column,i=this.collection,n=this.$el;this.listenTo(e,"change:editable change:sortable change:renderable",(function(t){var e=t.changedAttributes();for(var i in e)e.hasOwnProperty(i)&&n.toggleClass(i,e[i])})),this.listenTo(e,"change:direction",this.setCellDirection),this.listenTo(e,"change:name change:label",this.render),l.callByNeed(e.editable(),e,i)&&n.addClass("editable"),l.callByNeed(e.sortable(),e,i)&&n.addClass("sortable"),l.callByNeed(e.renderable(),e,i)&&n.addClass("renderable"),this.listenTo(i.fullCollection||i,"sort",this.removeCellDirection)},removeCellDirection:function(){this.$el.removeClass("ascending").removeClass("descending"),this.column.set("direction",null)},setCellDirection:function(t,e){this.$el.removeClass("ascending").removeClass("descending"),t.cid==this.column.cid&&this.$el.addClass(e)},onClick:function(t){t.preventDefault();var e,i=this.column,n=this.collection,r="backgrid:sort";l.callByNeed(i.sortable(),i,this.collection)&&("toggle"===i.get("sortType")?(e=i,"ascending"===i.get("direction")?n.trigger(r,e,"descending"):n.trigger(r,e,"ascending")):function(t,e){"ascending"===i.get("direction")?n.trigger(r,e,"descending"):"descending"===i.get("direction")?n.trigger(r,e,null):n.trigger(r,e,"ascending")}(0,i))},render:function(){this.$el.empty();var t,e=this.column;return t=l.callByNeed(e.sortable(),e,this.collection)?a("<a>").text(e.get("label")).append("<b class='sort-caret'></b>"):document.createTextNode(e.get("label")),this.$el.append(t),this.$el.addClass(e.get("name")),this.$el.addClass(e.get("direction")),this.delegateEvents(),this}}),N=(l.HeaderRow=l.Row.extend({requiredOptions:["columns","collection"],initialize:function(){l.Row.prototype.initialize.apply(this,arguments)},makeCell:function(t,e){var i=t.get("headerCell")||e.headerCell||I;return i=new i({column:t,collection:this.collection})}}),l.Header=i.View.extend({tagName:"thead",initialize:function(t){this.columns=t.columns,this.columns instanceof i.Collection||(this.columns=new S(this.columns)),this.row=new l.HeaderRow({columns:this.columns,collection:this.collection})},render:function(){return this.$el.append(this.row.render().$el),this.delegateEvents(),this},remove:function(){return this.row.remove.apply(this.row,arguments),i.View.prototype.remove.apply(this,arguments)}})),A=l.Body=i.View.extend({tagName:"tbody",initialize:function(t){this.columns=t.columns,this.columns instanceof i.Collection||(this.columns=new S(this.columns)),this.row=t.row||R,this.rows=this.collection.map((function(t){return new this.row({columns:this.columns,model:t})}),this),this.emptyText=t.emptyText,this._unshiftEmptyRowMayBe();var e=this.collection;this.listenTo(e,"add",this.insertRow),this.listenTo(e,"remove",this.removeRow),this.listenTo(e,"sort",this.refresh),this.listenTo(e,"reset",this.refresh),this.listenTo(e,"backgrid:sort",this.sort),this.listenTo(e,"backgrid:edited",this.moveToNextCell)},_unshiftEmptyRowMayBe:function(){0===this.rows.length&&null!=this.emptyText&&this.rows.unshift(new M({emptyText:this.emptyText,columns:this.columns}))},insertRow:function(t,e,n){if(this.rows[0]instanceof M&&this.rows.pop().remove(),e instanceof i.Collection||n){var r=new this.row({columns:this.columns,model:t}),s=e.indexOf(t);this.rows.splice(s,0,r);var o=this.$el,a=o.children(),l=r.render().$el;return s>=a.length?o.append(l):a.eq(s).before(l),this}this.collection.add(t,n=e)},removeRow:function(t,i,n){return n?((e.isUndefined(n.render)||n.render)&&this.rows[n.index].remove(),this.rows.splice(n.index,1),this._unshiftEmptyRowMayBe(),this):(this.collection.remove(t,n=i),void this._unshiftEmptyRowMayBe())},refresh:function(){for(var t=0;t<this.rows.length;t++)this.rows[t].remove();return this.rows=this.collection.map((function(t){return new this.row({columns:this.columns,model:t})}),this),this._unshiftEmptyRowMayBe(),this.render(),this.collection.trigger("backgrid:refresh",this),this},render:function(){this.$el.empty();for(var t=document.createDocumentFragment(),e=0;e<this.rows.length;e++){var i=this.rows[e];t.appendChild(i.render().el)}return this.el.appendChild(t),this.delegateEvents(),this},remove:function(){for(var t=0;t<this.rows.length;t++){var e=this.rows[t];e.remove.apply(e,arguments)}return i.View.prototype.remove.apply(this,arguments)},sort:function(t,n){if(!e.contains(["ascending","descending",null],n))throw new RangeError('direction must be one of "ascending", "descending" or `null`');e.isString(t)&&(t=this.columns.findWhere({name:t}));var r,s=this.collection;r="ascending"===n?-1:"descending"===n?1:null;var o=this.makeComparator(t.get("name"),r,r?t.sortValue():function(t){return 1*t.cid.replace("c","")});return i.PageableCollection&&s instanceof i.PageableCollection?(s.setSorting(r&&t.get("name"),r,{sortValue:t.sortValue()}),s.fullCollection?(null==s.fullCollection.comparator&&(s.fullCollection.comparator=o),s.fullCollection.sort(),s.trigger("backgrid:sorted",t,n,s)):s.fetch({reset:!0,success:function(){s.trigger("backgrid:sorted",t,n,s)}})):(s.comparator=o,s.sort(),s.trigger("backgrid:sorted",t,n,s)),t.set("direction",n),this},makeComparator:function(t,e,i){return function(n,r){var s,o=i(n,t),a=i(r,t);return 1===e&&(s=o,o=a,a=s),o===a?0:o<a?-1:1}},moveToNextCell:function(t,e,i){var n,r,s,o,a,c=this.collection.indexOf(t),h=this.columns.indexOf(e);if(this.rows[c].cells[h].exitEditMode(),i.moveUp()||i.moveDown()||i.moveLeft()||i.moveRight()||i.save()){var u=this.columns.length,d=u*this.collection.length;if(i.moveUp()||i.moveDown()){o=c+(i.moveUp()?-1:1);var f=this.rows[o];f?(n=f.cells[h],l.callByNeed(n.column.editable(),n.column,t)&&(n.enterEditMode(),t.trigger("backgrid:next",o,h,!1))):t.trigger("backgrid:next",o,h,!0)}else if(i.moveLeft()||i.moveRight()){for(var p=i.moveRight(),m=c*u+h+(p?1:-1);m>=0&&m<d;p?m++:m--)if(a=m-(o=~~(m/u))*u,n=this.rows[o].cells[a],r=l.callByNeed(n.column.renderable(),n.column,n.model),s=l.callByNeed(n.column.editable(),n.column,t),r&&s){n.enterEditMode(),t.trigger("backgrid:next",o,a,!1);break}m==d&&t.trigger("backgrid:next",~~(m/u),m-o*u,!0)}}return this}});l.Footer=i.View.extend({tagName:"tfoot",initialize:function(t){this.columns=t.columns,this.columns instanceof i.Collection||(this.columns=new l.Columns(this.columns))}}),l.Grid=i.View.extend({tagName:"table",className:"backgrid",header:N,body:A,footer:null,initialize:function(t){t.columns instanceof i.Collection||(t.columns=new S(t.columns)),this.columns=t.columns;var n=e.omit(t,["el","id","attributes","className","tagName","events"]);this.body=t.body||this.body,this.body=new this.body(n),this.header=t.header||this.header,this.header&&(this.header=new this.header(n)),this.footer=t.footer||this.footer,this.footer&&(this.footer=new this.footer(n)),this.listenTo(this.columns,"reset",(function(){this.header&&(this.header=new(this.header.remove().constructor)(n)),this.body=new(this.body.remove().constructor)(n),this.footer&&(this.footer=new(this.footer.remove().constructor)(n)),this.render()}))},insertRow:function(){return this.body.insertRow.apply(this.body,arguments),this},removeRow:function(){return this.body.removeRow.apply(this.body,arguments),this},insertColumn:function(){return this.columns.add.apply(this.columns,arguments),this},removeColumn:function(){return this.columns.remove.apply(this.columns,arguments),this},sort:function(){return this.body.sort.apply(this.body,arguments),this},render:function(){return this.$el.empty(),this.header&&this.$el.append(this.header.render().$el),this.footer&&this.$el.append(this.footer.render().$el),this.$el.append(this.body.render().$el),this.delegateEvents(),this.trigger("backgrid:rendered",this),this},remove:function(){return this.header&&this.header.remove.apply(this.header,arguments),this.body.remove.apply(this.body,arguments),this.footer&&this.footer.remove.apply(this.footer,arguments),i.View.prototype.remove.apply(this,arguments)}});return l})),
/*
  backgrid-paginator
  http://github.com/wyuenho/backgrid

  Copyright (c) 2013 Jimmy Yuen Ho Wong and contributors
  Licensed under the MIT @license.
*/
function(t,e){"object"==typeof exports?module.exports=e(require("underscore"),require("backbone"),require("backgrid"),require("backbone-pageable")):e(t._,t.Backbone,t.Backgrid)}(this,(function(t,e,i){"use strict";var n=i.Extension.PageHandle=e.View.extend({tagName:"li",events:{"click a":"changePage"},title:t.template("Page <%- label %>",null,{variable:null}),isRewind:!1,isBack:!1,isForward:!1,isFastForward:!1,initialize:function(e){var i,n=this.collection.state,r=n.currentPage,s=n.firstPage,o=n.lastPage;t.extend(this,t.pick(e,["isRewind","isBack","isForward","isFastForward"])),this.isRewind?i=s:this.isBack?i=Math.max(s,r-1):this.isForward?i=Math.min(o,r+1):this.isFastForward?i=o:(i=+e.pageIndex,i=s?i+1:i),this.pageIndex=i,this.label=(e.label||(s?i:i+1))+"";var a=e.title||this.title;this.title=t.isFunction(a)?a({label:this.label}):a},render:function(){this.$el.empty();var t=document.createElement("a");t.href="#",this.title&&(t.title=this.title),t.innerHTML=this.label,this.el.appendChild(t);var e=this.collection,i=e.state,n=i.currentPage,r=this.pageIndex;return this.isRewind&&n==i.firstPage||this.isBack&&!e.hasPreviousPage()||this.isForward&&!e.hasNextPage()||this.isFastForward&&(n==i.lastPage||i.totalPages<1)?this.$el.addClass("disabled"):this.isRewind||this.isBack||this.isForward||this.isFastForward||i.currentPage!=r||this.$el.addClass("active"),this.delegateEvents(),this},changePage:function(t){t.preventDefault();var e=this.$el,i=this.collection;return e.hasClass("active")||e.hasClass("disabled")||(this.isRewind?i.getFirstPage():this.isBack?i.getPreviousPage():this.isForward?i.getNextPage():this.isFastForward?i.getLastPage():i.getPage(this.pageIndex,{reset:!0})),this}}),r=i.Extension.Paginator=e.View.extend({className:"backgrid-paginator",windowSize:10,slideScale:.5,controls:{rewind:{label:"",title:"First"},back:{label:"",title:"Previous"},forward:{label:"",title:"Next"},fastForward:{label:"",title:"Last"}},renderIndexedPageHandles:!0,pageHandle:n,goBackFirstOnSort:!0,initialize:function(e){var i=this;i.controls=t.defaults(e.controls||{},i.controls,r.prototype.controls),t.extend(i,t.pick(e||{},"windowSize","pageHandle","slideScale","goBackFirstOnSort","renderIndexedPageHandles"));var n=i.collection;i.listenTo(n,"add",i.render),i.listenTo(n,"remove",i.render),i.listenTo(n,"reset",i.render),i.listenTo(n,"backgrid:sorted",(function(){i.goBackFirstOnSort&&n.getFirstPage({reset:!0})}))},slideMaybe:function(t,e,i,n,r){return Math.round(i%n/n)},slideThisMuch:function(t,e,i,n,r){return~~(n*r)},_calculateWindow:function(){var t=this.collection.state,e=t.firstPage,i=+t.lastPage;i=Math.max(0,e?i-1:i);var n=Math.max(t.currentPage,t.firstPage);n=e?n-1:n;var r=this.windowSize,s=this.slideScale,o=Math.floor(n/r)*r;return n<=i-this.slideThisMuch()&&(o+=this.slideMaybe(e,i,n,r,s)*this.slideThisMuch(e,i,n,r,s)),[o,Math.min(i+1,o+r)]},makeHandles:function(){var e=[],i=this.collection,n=this._calculateWindow(),r=n[0],s=n[1];if(this.renderIndexedPageHandles)for(var o=r;o<s;o++)e.push(new this.pageHandle({collection:i,pageIndex:o}));var a=this.controls;return t.each(["back","rewind","forward","fastForward"],(function(t){var n=a[t];if(n){var r={collection:i,title:n.title,label:n.label};r["is"+t.slice(0,1).toUpperCase()+t.slice(1)]=!0;var s=new this.pageHandle(r);"rewind"==t||"back"==t?e.unshift(s):e.push(s)}}),this),e},render:function(){if(this.$el.empty(),this.handles)for(var t=0,e=this.handles.length;t<e;t++)this.handles[t].remove();var i=this.handles=this.makeHandles(),n=document.createElement("ul");for(t=0;t<i.length;t++)n.appendChild(i[t].render().el);return this.el.appendChild(n),this}})})),
/*
  backgrid-text-cell
  http://github.com/wyuenho/backgrid

  Copyright (c) 2013 Jimmy Yuen Ho Wong and contributors
  Licensed under the MIT @license.
*/
function(t,e){"object"==typeof exports?module.exports=e(require("underscore"),require("backgrid")):e(t._,t.Backgrid)}(this,(function(t,e){var i=e.Extension.TextareaEditor=e.CellEditor.extend({tagName:"div",className:"modal fade",template:t.template('<div class="modal-dialog"><div class="modal-content"><form><div class="modal-header"><button type="button" class="close" data-dismiss="modal">&times;</button><h3><%- column.get("label") %></h3></div><div class="modal-body"><textarea cols="<%= cols %>" rows="<%= rows %>"><%- content %></textarea></div><div class="modal-footer"><input class="btn btn-primary" type="submit" value="Save"/></div></form></div></div>',null,{variable:null}),cols:80,rows:10,events:{"keydown textarea":"clearError",submit:"saveOrCancel","hide.bs.modal":"saveOrCancel","hidden.bs.modal":"close","shown.bs.modal":"focus"},modalOptions:{backdrop:!1},render:function(){return this.$el.html($(this.template({column:this.column,cols:this.cols,rows:this.rows,content:this.formatter.fromRaw(this.model.get(this.column.get("name")))}))),this.delegateEvents(),this.$el.modal(this.modalOptions),this},saveOrCancel:function(e){e&&"submit"==e.type&&(e.preventDefault(),e.stopPropagation());var i=this.model,n=this.column,r=this.$el.find("textarea").val(),s=this.formatter.toRaw(r);t.isUndefined(s)?(i.trigger("backgrid:error",i,n,r),e&&(e.preventDefault(),e.stopPropagation())):!e||"submit"==e.type||"hide"==e.type&&s!==(this.model.get(this.column.get("name"))||"").replace(/\r/g,"")&&confirm("Would you like to save your changes?")?(i.set(n.get("name"),s),this.$el.modal("hide")):"hide"!=e.type&&this.$el.modal("hide")},clearError:t.debounce((function(){t.isUndefined(this.formatter.toRaw(this.$el.find("textarea").val()))||this.$el.parent().removeClass("error")}),150),close:function(t){var i=this.model;i.trigger("backgrid:edited",i,this.column,new e.Command(t))},focus:function(){this.$el.find("textarea").focus()}});e.Extension.TextCell=e.StringCell.extend({className:"text-cell",editor:i})}));var app={},AdminRouter=Backbone.Router.extend({defaults:{currentGrid:null,currentPaginator:null},routes:{waves:"initWaveAdmin",users:"initUserAdmin",waveinvites:"initWaveInviteAdmin","messages/:waveId":"initMessageAdmin"},setCurrentGrid:function(t){$("#grid").empty(),this.currentPaginator&&(this.currentPaginator.remove(),$("#paginator").empty()),this.currentGrid=t,this.currentPaginator=new Backgrid.Extension.Paginator({collection:t.collection}),$("#grid").append(t.render().$el),$("#grid").find("table").addClass("table"),$("#paginator").append(this.currentPaginator.render().$el)},initUserAdmin:function(){$("h1").text("Users"),this.setCurrentGrid(app.userGrid),app.users.fetch({reset:!0})},initMessageAdmin:function(t){$("h1").text("Messages"),app.messages.reset(),this.setCurrentGrid(app.messageGrid),app.messages.url="/admin/api/message/"+t,app.messages.fetch({reset:!0})},initWaveAdmin:function(){$("h1").text("Waves"),this.setCurrentGrid(app.waveGrid),app.waves.fetch({reset:!0})},initWaveInviteAdmin:function(){$("h1").text("WaveInvites"),this.setCurrentGrid(app.waveInviteGrid),app.waveInvites.fetch({reset:!0})}});$((function(){app.adminRouter=new AdminRouter,Backbone.history.start()}));var Message=Backbone.Model.extend({defaults:{userId:null,waveId:null,rootId:null,parentId:null,message:"",created_at:null},idAttribute:"_id",initialize:function(){Backbone.Model.prototype.initialize.apply(this,arguments),this.on("change",(function(t,e){e&&!1===e.save||t.save()}))},isRoot:function(){return null===this.get("parentId")},getParent:function(t){return t.get(this.get("parentId"))},getDepth:function(t){return void 0===this.depth&&(this.depth=this.isRoot()?0:1+this.getParent(t).getDepth(t)),this.depth},getPath:function(t){return void 0===this.path&&(this.isRoot()?this.path=[this.get("_id")]:(this.path=this.getParent(t).getPath(t),this.path.push(this.get("_id")))),this.path.slice()}}),Messages=Backbone.PageableCollection.extend({url:"/admin/api/message/",state:{pageSize:100},model:Message,comparator:function(t,e){if(t.get("parentId")===e.get("parentId"))return t.get("created_at")<e.get("created_at")?-1:1;for(var i=t.getPath(this),n=e.getPath(this),r=0;i[r]===n[r];)r++;return void 0===i[r]?-1:void 0===n[r]?1:this.get(i[r]).get("created_at")<this.get(n[r]).get("created_at")?-1:1}});app.messages=new Messages,app.messageGrid=new Backgrid.Grid({columns:[{name:"user",cell:Backgrid.Cell.extend({render:function(){this.$el.empty();var t=app.users.getUser(this.model.get("userId")),e=new UserView({model:t});return this.$el.append(e.render().el),this.delegateEvents(),this}}),editable:!1,sortable:!1},{name:"message",cell:Backgrid.Cell.extend({render:function(){this.$el.empty();var t=this.model.getDepth(app.messageGrid.collection),e=this.model.get("message"),i=this.formatter.fromRaw(e);return this.$el.append($("<div>").css("margin-left",20*t+"px").text(i)),this.delegateEvents(),this}}),editable:!0,sortable:!1},{name:"created_at",cell:"datetime",editable:!1,sortable:!1}],collection:app.messages});var User=Backbone.Model.extend({defaults:{name:"",avatar:"",email:""},idAttribute:"_id",initialize:function(){Backbone.Model.prototype.initialize.apply(this,arguments),this.on("change",(function(t,e){e&&!1===e.save||t.save()}),this)},getUnreadCountByWaveId:function(t){var e=this,i="unread-"+t;return void 0!==this[i]||($.getJSON("/admin/api/unread/"+this.id+"/"+t,(function(t){e[i]=t,e.trigger("changeUnread")})),this[i]="*"),this[i]},deleteUnreadCountByWaveId:function(t){var e=this,i="unread-"+t;this[i]>0&&$.ajax("/admin/api/unread/"+this.id+"/"+t,{type:"DELETE",success:function(){e[i]=0,e.trigger("changeUnread")}})}}),Users=Backbone.PageableCollection.extend({url:"/admin/api/user",state:{pageSize:10},model:User,getUser:function(t){var e=this.get(t);return void 0===e&&(e=new User({_id:t,name:"[loading]"}),this.add(e),e.fetch({save:!1})),e}});app.users=new Users,app.userGrid=new Backgrid.Grid({columns:[{name:"avatar",cell:Backgrid.Cell.extend({render:function(){this.$el.empty();var t=this.model.get("avatar"),e=$('<img src="'+t+'" width="50">');return this.$el.append(e),this.delegateEvents(),this}}),sortable:!1},{name:"name",cell:"string"},{name:"email",cell:"email"},{name:"_id",cell:"string",editable:!1}],collection:app.users});var Wave=Backbone.Model.extend({defaults:{title:"",userIds:[],msgCount:0,lastMsgCreatedAt:null},idAttribute:"_id",initialize:function(){Backbone.Model.prototype.initialize.apply(this,arguments),this.on("change",(function(t,e){e&&!1===e.save||t.save()}))},removeUser:function(t){this.get("userIds").indexOf(t)>=0&&this.set("userIds",_.without(this.get("userIds"),t))}}),Waves=Backbone.PageableCollection.extend({url:"/admin/api/wave",state:{pageSize:10},model:Wave});app.waves=new Waves,app.waveGrid=new Backgrid.Grid({columns:[{name:"title",cell:Backgrid.Cell.extend({render:function(){this.$el.empty();var t=this.model.get("_id"),e=this.model.get("title"),i=$('<a href="/admin#messages/'+t+'">'+this.formatter.fromRaw(e)+"</a>");return this.$el.append(i),this.delegateEvents(),this}}),sortable:!0,editable:!0},{name:"users",cell:Backgrid.Cell.extend({render:function(){return this.$el.empty(),this.model.get("userIds").forEach((function(t){var e=app.users.getUser(t),i=new UserView({model:e});i.setWave(this.model),this.$el.append(i.render().el)}),this),this.delegateEvents(),this}}),editable:!1,sortable:!1},{name:"msgCount",label:"Message count",cell:"integer",sortable:!1,editable:!1},{name:"lastMsgCreatedAt",label:"Last message",cell:"datetime",sortable:!1,editable:!1}],collection:app.waves});var WaveInvite=Backbone.Model.extend({defaults:{userId:"",waveId:"",created_at:"",code:""},idAttribute:"_id",initialize:function(){Backbone.Model.prototype.initialize.apply(this,arguments),this.on("change",(function(t,e){e&&!1===e.save||t.save()}))}}),WaveInvites=Backbone.PageableCollection.extend({url:"/admin/api/waveinvite",state:{pageSize:10},model:WaveInvite});app.waveInvites=new WaveInvites,app.waveInviteGrid=new Backgrid.Grid({columns:[{name:"user",cell:Backgrid.Cell.extend({render:function(){this.$el.empty();var t=app.users.getUser(this.model.get("userId")),e=new UserView({model:t});return this.$el.append(e.render().el),this.delegateEvents(),this}}),editable:!1,sortable:!1},{name:"waveId",cell:"string"},{name:"code",cell:"string"},{name:"created_at",cell:"datetime",editable:!1}],collection:app.waveInvites});var UserView=Backbone.View.extend({initialize:function(){_.bindAll(this,"render","removeUser","setWave","readAll"),this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"changeUnread",this.render)},events:{"click button.remove":"removeUser","click a.unread":"readAll"},render:function(){return this.$el.empty(),this.$el.addClass("userview"),this.$el.append($('<img src="'+this.model.get("avatar")+'" width="20">')),this.$el.append($("<span>").text(this.model.get("name"))),this.wave&&(this.$el.append($("<a>").text("["+this.model.getUnreadCountByWaveId(this.wave.id)+"]").addClass("unread")),this.$el.prepend($('<button type="button" class="btn btn-xs btn-danger remove">Remove</button>'))),this},setWave:function(t){this.wave=t,this.render()},removeUser:function(){confirm("Are you sure?")&&(this.wave.removeUser(this.model.get("_id")),this.remove())},readAll:function(t){t.preventDefault(),confirm("Are you sure?")&&this.model.deleteUnreadCountByWaveId(this.wave.id)}});